/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.l = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// identity function for calling harmory imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };

/******/ 	// define getter function for harmory exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		Object.defineProperty(exports, name, {
/******/ 			configurable: false,
/******/ 			enumerable: true,
/******/ 			get: getter
/******/ 		});
/******/ 	};

/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};

/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 2);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

"use strict";
eval("\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar flatpickr = function flatpickr(selector, config) {\n\tvar elements = void 0;\n\n\tvar createInstance = function createInstance(element) {\n\t\tif (element._flatpickr) {\n\t\t\telement._flatpickr.destroy();\n\t\t}\n\n\t\telement._flatpickr = new flatpickr.init(element, config);\n\t\treturn element._flatpickr;\n\t};\n\n\tif (selector.nodeName) {\n\t\treturn createInstance(selector);\n\t}\n\t/*\n Utilize the performance of native getters if applicable\n https://jsperf.com/getelementsbyclassname-vs-queryselectorall/18\n https://jsperf.com/jquery-vs-javascript-performance-comparison/22\n */\n\telse if (/^#[a-zA-Z0-9\\-_]*$/.test(selector)) {\n\t\t\treturn createInstance(document.getElementById(selector.slice(1)));\n\t\t} else if (/^\\.[a-zA-Z0-9\\-_]*$/.test(selector)) {\n\t\t\telements = document.getElementsByClassName(selector.slice(1));\n\t\t} else {\n\t\t\telements = document.querySelectorAll(selector);\n\t\t}\n\n\tvar instances = [];\n\n\tfor (var i = 0; i < elements.length; i++) {\n\t\tinstances.push(createInstance(elements[i]));\n\t}\n\n\tif (instances.length === 1) {\n\t\treturn instances[0];\n\t}\n\n\treturn {\n\t\tcalendars: instances,\n\t\tbyID: function byID(id) {\n\t\t\treturn document.getElementById(id)._flatpickr;\n\t\t}\n\t};\n};\n\n/**\n * @constructor\n */\nflatpickr.init = function (element, instanceConfig) {\n\tfunction createElement(tag, className, content) {\n\t\tvar newElement = document.createElement(tag);\n\n\t\tif (content) {\n\t\t\tnewElement.textContent = content;\n\t\t}\n\n\t\tif (className) {\n\t\t\tnewElement.className = className;\n\t\t}\n\n\t\treturn newElement;\n\t}\n\n\tvar debounce = function debounce(func, wait, immediate) {\n\t\tvar timeout = void 0;\n\t\treturn function () {\n\t\t\tvar arguments$1 = arguments;\n\n\t\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\targs[_key] = arguments$1[_key];\n\t\t\t}\n\n\t\t\tvar context = this;\n\n\t\t\tvar later = function later() {\n\t\t\t\ttimeout = null;\n\t\t\t\tif (!immediate) {\n\t\t\t\t\tfunc.apply(context, args);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t\tif (immediate && !timeout) {\n\t\t\t\tfunc.apply(context, args);\n\t\t\t}\n\t\t};\n\t};\n\n\t// functions\n\tvar self = this;\n\tvar parseConfig = void 0,\n\t    init = void 0,\n\t    wrap = void 0,\n\t    uDate = void 0,\n\t    equalDates = void 0,\n\t    pad = void 0,\n\t    monthToStr = void 0,\n\t    isEnabled = void 0,\n\t    buildMonthNavigation = void 0,\n\t    buildWeekdays = void 0,\n\t    buildCalendar = void 0,\n\t    buildDays = void 0,\n\t    buildWeeks = void 0,\n\t    buildTime = void 0,\n\t    timeWrapper = void 0,\n\t    yearScroll = void 0,\n\t    updateValue = void 0,\n\t    amPMToggle = void 0,\n\t    onKeyDown = void 0,\n\t    onResize = void 0,\n\t    updateNavigationCurrentMonth = void 0,\n\t    handleYearChange = void 0,\n\t    changeMonth = void 0,\n\t    getDaysinMonth = void 0,\n\t    documentClick = void 0,\n\t    selectDate = void 0,\n\t    getRandomCalendarIdStr = void 0,\n\t    bind = void 0,\n\t    triggerChange = void 0;\n\n\t// elements & variables\n\tvar calendarContainer = void 0,\n\t    weekdayContainer = void 0,\n\t    timeContainer = void 0,\n\t    navigationCurrentMonth = void 0,\n\t    monthsNav = void 0,\n\t    prevMonthNav = void 0,\n\t    currentYearElement = void 0,\n\t    currentMonthElement = void 0,\n\t    nextMonthNav = void 0,\n\t    calendar = void 0,\n\t    weekNumbers = void 0,\n\t    now = new Date(),\n\t    wrapperElement = void 0,\n\t    clickEvt = void 0;\n\n\tself.formats = {\n\t\t// weekday name, short, e.g. Thu\n\t\tD: function D() {\n\t\t\treturn self.l10n.weekdays.shorthand[self.formats.w()];\n\t\t},\n\n\t\t// full month name e.g. January\n\t\tF: function F() {\n\t\t\treturn monthToStr(self.formats.n() - 1, false);\n\t\t},\n\n\t\t// hours with leading zero e.g. 03\n\t\tH: function H() {\n\t\t\treturn pad(self.selectedDateObj.getHours());\n\t\t},\n\n\t\t// day (1-30) with ordinal suffix e.g. 1st, 2nd\n\t\tJ: function J() {\n\t\t\treturn self.formats.j() + self.l10n.ordinal(self.formats.j());\n\t\t},\n\n\t\t// AM/PM\n\t\tK: function K() {\n\t\t\treturn self.selectedDateObj.getHours() > 11 ? \"PM\" : \"AM\";\n\t\t},\n\n\t\t// shorthand month e.g. Jan, Sep, Oct, etc\n\t\tM: function M() {\n\t\t\treturn monthToStr(self.formats.n() - 1, true);\n\t\t},\n\n\t\t// seconds 00-59\n\t\tS: function S() {\n\t\t\treturn pad(self.selectedDateObj.getSeconds());\n\t\t},\n\n\t\t// unix timestamp\n\t\tU: function U() {\n\t\t\treturn self.selectedDateObj.getTime() / 1000;\n\t\t},\n\n\t\t// full year e.g. 2016\n\t\tY: function Y() {\n\t\t\treturn self.selectedDateObj.getFullYear();\n\t\t},\n\n\t\t// day in month, padded (01-30)\n\t\td: function d() {\n\t\t\treturn pad(self.formats.j());\n\t\t},\n\n\t\t// hour from 1-12 (am/pm)\n\t\th: function h() {\n\t\t\treturn self.selectedDateObj.getHours() % 12 ? self.selectedDateObj.getHours() % 12 : 12;\n\t\t},\n\n\t\t// minutes, padded with leading zero e.g. 09\n\t\ti: function i() {\n\t\t\treturn pad(self.selectedDateObj.getMinutes());\n\t\t},\n\n\t\t// day in month (1-30)\n\t\tj: function j() {\n\t\t\treturn self.selectedDateObj.getDate();\n\t\t},\n\n\t\t// weekday name, full, e.g. Thursday\n\t\tl: function l() {\n\t\t\treturn self.l10n.weekdays.longhand[self.formats.w()];\n\t\t},\n\n\t\t// padded month number (01-12)\n\t\tm: function m() {\n\t\t\treturn pad(self.formats.n());\n\t\t},\n\n\t\t// the month number (1-12)\n\t\tn: function n() {\n\t\t\treturn self.selectedDateObj.getMonth() + 1;\n\t\t},\n\n\t\t// seconds 0-59\n\t\ts: function s() {\n\t\t\treturn self.selectedDateObj.getSeconds();\n\t\t},\n\n\t\t// number of the day of the week\n\t\tw: function w() {\n\t\t\treturn self.selectedDateObj.getDay();\n\t\t},\n\n\t\t// last two digits of year e.g. 16 for 2016\n\t\ty: function y() {\n\t\t\treturn String(self.formats.Y()).substring(2);\n\t\t}\n\t};\n\n\tself.defaultConfig = {\n\t\t/* if true, dates will be parsed, formatted, and displayed in UTC.\n  preloading date strings w/ timezones is recommended but not necessary */\n\t\tutc: false,\n\n\t\t// wrap: see https://chmln.github.io/flatpickr/#strap\n\t\twrap: false,\n\n\t\t// enables week numbers\n\t\tweekNumbers: false,\n\n\t\tallowInput: false,\n\n\t\t/*\n  \tclicking on input opens the date(time)picker.\n  \tdisable if you wish to open the calendar manually with .open()\n  */\n\t\tclickOpens: true,\n\n\t\t// display time picker in 24 hour mode\n\t\ttime_24hr: false,\n\n\t\t// enables the time picker functionality\n\t\tenableTime: false,\n\n\t\t// noCalendar: true will hide the calendar. use for a time picker along w/ enableTime\n\t\tnoCalendar: false,\n\n\t\t// more date format chars at https://chmln.github.io/flatpickr/#dateformat\n\t\tdateFormat: \"Y-m-d\",\n\n\t\t// altInput - see https://chmln.github.io/flatpickr/#altinput\n\t\taltInput: false,\n\n\t\t// the created altInput element will have this class.\n\t\taltInputClass: \"\",\n\n\t\t// same as dateFormat, but for altInput\n\t\taltFormat: \"F j, Y\", // defaults to e.g. June 10, 2016\n\n\t\t// defaultDate - either a datestring or a date object. used for datetimepicker\"s initial value\n\t\tdefaultDate: null,\n\n\t\t// the minimum date that user can pick (inclusive)\n\t\tminDate: null,\n\n\t\t// the maximum date that user can pick (inclusive)\n\t\tmaxDate: null,\n\n\t\t// dateparser that transforms a given string to a date object\n\t\tparseDate: null,\n\n\t\t// see https://chmln.github.io/flatpickr/#disable\n\t\tenable: [],\n\n\t\t// see https://chmln.github.io/flatpickr/#disable\n\t\tdisable: [],\n\n\t\t// display the short version of month names - e.g. Sep instead of September\n\t\tshorthandCurrentMonth: false,\n\n\t\t// displays calendar inline. see https://chmln.github.io/flatpickr/#inline-calendar\n\t\tinline: false,\n\n\t\t// position calendar inside wrapper and next to the input element\n\t\t// leave at false unless you know what you\"re doing\n\t\tstatic: false,\n\n\t\t// code for previous/next icons. this is where you put your custom icon code e.g. fontawesome\n\t\tprevArrow: \"&lt;\",\n\t\tnextArrow: \"&gt;\",\n\n\t\t// enables seconds in the time picker\n\t\tenableSeconds: false,\n\n\t\t// step size used when scrolling/incrementing the hour element\n\t\thourIncrement: 1,\n\n\t\t// step size used when scrolling/incrementing the minute element\n\t\tminuteIncrement: 5,\n\n\t\t// onChange callback when user selects a date or time\n\t\tonChange: null, // function (dateObj, dateStr) {}\n\n\t\t// called every time calendar is opened\n\t\tonOpen: null, // function (dateObj, dateStr) {}\n\n\t\t// called every time calendar is closed\n\t\tonClose: null, // function (dateObj, dateStr) {}\n\n\t\tonValueUpdate: null\n\t};\n\n\tinit = function init() {\n\t\tinstanceConfig = instanceConfig || {};\n\n\t\tself.element = element;\n\n\t\tparseConfig();\n\n\t\tself.input = self.config.wrap ? element.querySelector(\"[data-input]\") : element;\n\t\tself.input.classList.add(\"flatpickr-input\");\n\n\t\tif (self.config.defaultDate) {\n\t\t\tself.config.defaultDate = uDate(self.config.defaultDate);\n\t\t}\n\n\t\tif (self.input.value || self.config.defaultDate) {\n\t\t\tself.selectedDateObj = uDate(self.config.defaultDate || self.input.value);\n\t\t}\n\n\t\twrap();\n\t\tbuildCalendar();\n\t\tbind();\n\n\t\tself.uDate = uDate;\n\t\tself.jumpToDate();\n\t\tupdateValue();\n\t};\n\n\tparseConfig = function parseConfig() {\n\t\tself.config = {};\n\n\t\tObject.keys(self.defaultConfig).forEach(function (key) {\n\t\t\tif (instanceConfig.hasOwnProperty(key)) {\n\t\t\t\tself.config[key] = instanceConfig[key];\n\t\t\t} else if (self.element.dataset && self.element.dataset.hasOwnProperty(key.toLowerCase())) {\n\t\t\t\tself.config[key] = self.element.dataset[key.toLowerCase()];\n\t\t\t} else if (!self.element.dataset && self.element.hasAttribute(\"data-\" + key)) {\n\t\t\t\tself.config[key] = self.element.getAttribute(\"data-\" + key);\n\t\t\t} else {\n\t\t\t\tself.config[key] = flatpickr.init.prototype.defaultConfig[key] || self.defaultConfig[key];\n\t\t\t}\n\n\t\t\tif (typeof self.defaultConfig[key] === \"boolean\") {\n\t\t\t\tself.config[key] = self.config[key] === true || self.config[key] === \"\" || self.config[key] === \"true\";\n\t\t\t}\n\n\t\t\tif (key === \"enableTime\" && self.config[key]) {\n\t\t\t\tself.defaultConfig.dateFormat = !self.config.time_24hr ? \"Y-m-d h:i K\" : \"Y-m-d H:i\";\n\t\t\t\tself.defaultConfig.altFormat = !self.config.time_24hr ? \"F j Y, h:i K\" : \"F j, Y H:i\";\n\t\t\t} else if (key === \"noCalendar\" && self.config[key]) {\n\t\t\t\tself.defaultConfig.dateFormat = \"h:i K\";\n\t\t\t\tself.defaultConfig.altFormat = \"h:i K\";\n\t\t\t}\n\t\t});\n\t};\n\n\tgetRandomCalendarIdStr = function getRandomCalendarIdStr() {\n\t\tvar randNum = void 0,\n\t\t    idStr = void 0;\n\t\tdo {\n\t\t\trandNum = Math.round(Math.random() * Math.pow(10, 10));\n\t\t\tidStr = \"flatpickr-\" + randNum;\n\t\t} while (document.getElementById(idStr) !== null);\n\n\t\treturn idStr;\n\t};\n\n\tuDate = function uDate(date, timeless) {\n\t\ttimeless = timeless || false;\n\n\t\tif (date === \"today\") {\n\t\t\tdate = new Date();\n\t\t\ttimeless = true;\n\t\t} else if (typeof date === \"string\") {\n\t\t\tdate = date.trim();\n\n\t\t\tif (self.config.parseDate) {\n\t\t\t\tdate = self.config.parseDate(date);\n\t\t\t} else if (/^\\d\\d\\d\\d\\-\\d{1,2}\\-\\d\\d$/.test(date)) {\n\t\t\t\t// this utc datestring gets parsed, but incorrectly by Date.parse\n\t\t\t\tdate = new Date(date.replace(/(\\d)-(\\d)/g, \"$1/$2\"));\n\t\t\t} else if (Date.parse(date)) {\n\t\t\t\tdate = new Date(date);\n\t\t\t} else if (/^\\d\\d\\d\\d\\-\\d\\d\\-\\d\\d/.test(date)) {\n\t\t\t\t// disable special utc datestring\n\t\t\t\tdate = new Date(date.replace(/(\\d)-(\\d)/g, \"$1/$2\"));\n\t\t\t} else if (/^(\\d?\\d):(\\d\\d)/.test(date)) {\n\t\t\t\t// time-only picker\n\t\t\t\tvar matches = date.match(/^(\\d?\\d):(\\d\\d)(:(\\d\\d))?/),\n\t\t\t\t    seconds = matches[4] !== undefined ? matches[4] : 0;\n\n\t\t\t\tdate = new Date();\n\t\t\t\tdate.setHours(matches[1], matches[2], seconds, 0);\n\t\t\t} else {\n\t\t\t\tconsole.error(\"flatpickr: invalid date string \" + date);\n\t\t\t\tconsole.info(self.element);\n\t\t\t}\n\t\t}\n\n\t\tif (!(date instanceof Date) || !date.getTime()) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (self.config.utc && !date.fp_isUTC) {\n\t\t\tdate = date.fp_toUTC();\n\t\t}\n\n\t\tif (timeless) {\n\t\t\tdate.setHours(0, 0, 0, 0);\n\t\t}\n\n\t\treturn date;\n\t};\n\n\tequalDates = function equalDates(date1, date2) {\n\t\treturn date1.getDate() === date2.getDate() && date1.getMonth() === date2.getMonth() && date1.getFullYear() === date2.getFullYear();\n\t};\n\n\twrap = function wrap() {\n\t\twrapperElement = createElement(\"div\", \"flatpickr-wrapper\");\n\n\t\tif (self.config.inline || self.config.static) {\n\t\t\t// Wrap input and place calendar underneath\n\t\t\tself.element.parentNode.insertBefore(wrapperElement, self.element);\n\t\t\twrapperElement.appendChild(self.element);\n\n\t\t\twrapperElement.classList.add(self.config.inline ? \"inline\" : \"static\");\n\t\t} else {\n\t\t\t// Insert at bottom of BODY tag to display outside\n\t\t\t// of relative positioned elements with css \"overflow: hidden;\"\n\t\t\t// property set.\n\t\t\tdocument.body.appendChild(wrapperElement);\n\t\t}\n\n\t\tif (self.config.altInput) {\n\t\t\t// replicate self.element\n\t\t\tself.altInput = createElement(self.input.nodeName, self.config.altInputClass + \" flatpickr-input\");\n\t\t\tself.altInput.placeholder = self.input.placeholder;\n\t\t\tself.altInput.type = \"text\";\n\n\t\t\tself.input.type = \"hidden\";\n\t\t\tself.input.parentNode.insertBefore(self.altInput, self.input.nextSibling);\n\t\t}\n\t};\n\n\tgetDaysinMonth = function getDaysinMonth() {\n\t\tvar month = arguments.length <= 0 || arguments[0] === undefined ? self.currentMonth : arguments[0];\n\n\t\tvar yr = self.currentYear;\n\n\t\tif (month === 1 && (yr % 4 === 0 && yr % 100 !== 0 || yr % 400 === 0)) {\n\t\t\treturn 29;\n\t\t}\n\n\t\treturn self.l10n.daysInMonth[month];\n\t};\n\n\tupdateValue = function updateValue(e) {\n\t\tif (self.config.noCalendar && !self.selectedDateObj) {\n\t\t\t// picking time only and method triggered from picker\n\t\t\tself.selectedDateObj = new Date();\n\t\t} else if (!self.selectedDateObj) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (e) {\n\t\t\te.target.blur();\n\t\t}\n\n\t\tvar timeHasChanged = void 0;\n\n\t\tif (self.config.enableTime) {\n\t\t\tvar previousTimestamp = self.selectedDateObj.getTime();\n\n\t\t\t// update time\n\t\t\tvar hours = parseInt(self.hourElement.value, 10) || 0,\n\t\t\t    seconds = void 0;\n\n\t\t\tvar minutes = (60 + (parseInt(self.minuteElement.value, 10) || 0)) % 60;\n\n\t\t\tif (self.config.enableSeconds) {\n\t\t\t\tseconds = (60 + parseInt(self.secondElement.value, 10) || 0) % 60;\n\t\t\t}\n\n\t\t\tif (!self.config.time_24hr) {\n\t\t\t\t// the real number of hours for the date object\n\t\t\t\thours = hours % 12 + 12 * (self.amPM.innerHTML === \"PM\");\n\t\t\t}\n\n\t\t\tself.selectedDateObj.setHours(hours, minutes, seconds === undefined ? self.selectedDateObj.getSeconds() : seconds);\n\n\t\t\tself.hourElement.value = pad(!self.config.time_24hr ? (12 + hours) % 12 + 12 * (hours % 12 === 0) : hours);\n\t\t\tself.minuteElement.value = pad(minutes);\n\n\t\t\tif (seconds !== undefined) {\n\t\t\t\tself.secondElement.value = pad(seconds);\n\t\t\t}\n\n\t\t\ttimeHasChanged = self.selectedDateObj.getTime() !== previousTimestamp;\n\t\t}\n\n\t\tself.input.value = self.formatDate(self.config.dateFormat);\n\n\t\tif (self.altInput) {\n\t\t\tself.altInput.value = self.formatDate(self.config.altFormat);\n\t\t}\n\n\t\tif (e && (timeHasChanged || e.target.classList.contains(\"flatpickr-day\"))) {\n\t\t\ttriggerChange();\n\t\t}\n\n\t\tif (self.config.onValueUpdate) {\n\t\t\tself.config.onValueUpdate(self.selectedDateObj, self.input.value, self);\n\t\t}\n\t};\n\n\tpad = function pad(num) {\n\t\treturn (\"0\" + num).slice(-2);\n\t};\n\n\tself.formatDate = function (dateFormat) {\n\t\tvar formattedDate = \"\";\n\t\tvar formatPieces = dateFormat.split(\"\");\n\n\t\tfor (var i = 0; i < formatPieces.length; i++) {\n\t\t\tvar c = formatPieces[i];\n\t\t\tif (self.formats.hasOwnProperty(c) && formatPieces[i - 1] !== \"\\\\\") {\n\t\t\t\tformattedDate += self.formats[c]();\n\t\t\t} else if (c !== \"\\\\\") {\n\t\t\t\tformattedDate += c;\n\t\t\t}\n\t\t}\n\n\t\treturn formattedDate;\n\t};\n\n\tmonthToStr = function monthToStr(date, shorthand) {\n\t\tif (shorthand || self.config.shorthandCurrentMonth) {\n\t\t\treturn self.l10n.months.shorthand[date];\n\t\t}\n\n\t\treturn self.l10n.months.longhand[date];\n\t};\n\n\tisEnabled = function isEnabled(dateToCheck) {\n\t\tif (self.config.minDate && dateToCheck < self.config.minDate || self.config.maxDate && dateToCheck > self.config.maxDate) {\n\t\t\treturn false;\n\t\t}\n\n\t\tdateToCheck = uDate(dateToCheck, true); // timeless\n\n\t\tvar bool = self.config.enable.length > 0,\n\t\t    array = bool ? self.config.enable : self.config.disable;\n\n\t\tvar d = void 0;\n\n\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\td = array[i];\n\n\t\t\tif (d instanceof Function && d(dateToCheck)) {\n\t\t\t\t// disabled by function\n\t\t\t\treturn bool;\n\t\t\t} else if ( // disabled weekday\n\t\t\ttypeof d === \"string\" && /^wkd/.test(d) && dateToCheck.getDay() === (parseInt(d.slice(-1), 10) + self.l10n.firstDayOfWeek - 1) % 7) {\n\t\t\t\treturn bool;\n\t\t\t} else if ((d instanceof Date || typeof d === \"string\" && !/^wkd/.test(d)) && uDate(d, true).getTime() === dateToCheck.getTime()) {\n\t\t\t\t// disabled by date string\n\t\t\t\treturn bool;\n\t\t\t} else if ( // disabled by range\n\t\t\t(typeof d === \"undefined\" ? \"undefined\" : _typeof(d)) === \"object\" && d.hasOwnProperty(\"from\") && dateToCheck >= uDate(d.from) && dateToCheck <= uDate(d.to)) {\n\t\t\t\treturn bool;\n\t\t\t}\n\t\t}\n\n\t\treturn !bool;\n\t};\n\n\tyearScroll = function yearScroll(event) {\n\t\tevent.preventDefault();\n\n\t\tvar delta = Math.max(-1, Math.min(1, event.wheelDelta || -event.deltaY));\n\t\tself.currentYear = event.target.value = parseInt(event.target.value, 10) + delta;\n\t\tself.redraw();\n\t};\n\n\ttimeWrapper = function timeWrapper(e) {\n\t\te.preventDefault();\n\n\t\tvar min = parseInt(e.target.min, 10),\n\t\t    max = parseInt(e.target.max, 10),\n\t\t    step = parseInt(e.target.step, 10),\n\t\t    value = parseInt(e.target.value, 10);\n\n\t\tvar newValue = value;\n\n\t\tif (e.type === \"wheel\") {\n\t\t\tnewValue = value + step * Math.max(-1, Math.min(1, e.wheelDelta || -e.deltaY));\n\t\t}\n\n\t\tif (newValue <= min) {\n\t\t\tnewValue = max - step;\n\t\t} else if (newValue >= max) {\n\t\t\tnewValue = min + step;\n\t\t}\n\n\t\te.target.value = pad(newValue);\n\t};\n\n\tupdateNavigationCurrentMonth = function updateNavigationCurrentMonth() {\n\t\tcurrentMonthElement.textContent = monthToStr(self.currentMonth) + \" \";\n\t\tcurrentYearElement.value = self.currentYear;\n\t};\n\n\thandleYearChange = function handleYearChange() {\n\t\tif (self.currentMonth < 0 || self.currentMonth > 11) {\n\t\t\tself.currentYear += self.currentMonth % 11;\n\t\t\tself.currentMonth = (self.currentMonth + 12) % 12;\n\t\t}\n\t};\n\n\tdocumentClick = function documentClick(e) {\n\t\tvar isCalendarElement = wrapperElement.contains(e.relatedTarget || e.target),\n\t\t    isInput = self.element.contains(e.relatedTarget || e.target) || e.relatedTarget || e.target === self.altInput;\n\n\t\tif (self.isOpen && !isCalendarElement && !isInput) {\n\t\t\tself.close();\n\t\t}\n\t};\n\n\tchangeMonth = function changeMonth(offset) {\n\t\tself.currentMonth += offset;\n\n\t\thandleYearChange();\n\t\tupdateNavigationCurrentMonth();\n\t\tbuildDays();\n\t\t(self.config.noCalendar ? timeContainer : calendar).focus();\n\t};\n\n\tselectDate = function selectDate(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tif (self.config.allowInput && e.target === (self.altInput || self.input) && e.which === 13) {\n\t\t\tself.setDate((self.altInput || self.input).value);\n\t\t\tself.redraw();\n\t\t} else if (e.target.classList.contains(\"flatpickr-day\")) {\n\t\t\tvar isPrevMonthDay = e.target.classList.contains(\"prevMonthDay\"),\n\t\t\t    isNextMonthDay = e.target.classList.contains(\"nextMonthDay\"),\n\t\t\t    monthNum = self.currentMonth - isPrevMonthDay + isNextMonthDay;\n\n\t\t\tif (isPrevMonthDay || isNextMonthDay) {\n\t\t\t\tchangeMonth(+isNextMonthDay - isPrevMonthDay);\n\t\t\t}\n\n\t\t\tself.selectedDateObj = new Date(self.currentYear, monthNum, e.target.innerHTML);\n\n\t\t\tupdateValue(e);\n\t\t\tbuildDays();\n\n\t\t\tif (!self.config.enableTime) {\n\t\t\t\tself.close();\n\t\t\t}\n\t\t}\n\t};\n\n\tbuildCalendar = function buildCalendar() {\n\t\tcalendarContainer = createElement(\"div\", \"flatpickr-calendar\");\n\t\tcalendarContainer.id = getRandomCalendarIdStr();\n\n\t\tcalendar = createElement(\"div\", \"flatpickr-days\");\n\t\tcalendar.tabIndex = -1;\n\n\t\tif (!self.config.noCalendar) {\n\t\t\tbuildMonthNavigation();\n\t\t\tbuildWeekdays();\n\n\t\t\tif (self.config.weekNumbers) {\n\t\t\t\tbuildWeeks();\n\t\t\t}\n\n\t\t\tbuildDays();\n\n\t\t\tcalendarContainer.appendChild(calendar);\n\t\t}\n\n\t\twrapperElement.appendChild(calendarContainer);\n\n\t\tif (self.config.enableTime) {\n\t\t\tbuildTime();\n\t\t}\n\t};\n\n\tbuildMonthNavigation = function buildMonthNavigation() {\n\t\tmonthsNav = createElement(\"div\", \"flatpickr-month\");\n\n\t\tprevMonthNav = createElement(\"span\", \"flatpickr-prev-month\");\n\t\tprevMonthNav.innerHTML = self.config.prevArrow;\n\n\t\tcurrentMonthElement = createElement(\"span\", \"cur_month\");\n\n\t\tcurrentYearElement = createElement(\"input\", \"cur_year\");\n\t\tcurrentYearElement.type = \"number\";\n\t\tcurrentYearElement.title = self.l10n.scrollTitle;\n\n\t\tnextMonthNav = createElement(\"span\", \"flatpickr-next-month\");\n\t\tnextMonthNav.innerHTML = self.config.nextArrow;\n\n\t\tnavigationCurrentMonth = createElement(\"span\", \"flatpickr-current-month\");\n\t\tnavigationCurrentMonth.appendChild(currentMonthElement);\n\t\tnavigationCurrentMonth.appendChild(currentYearElement);\n\n\t\tmonthsNav.appendChild(prevMonthNav);\n\t\tmonthsNav.appendChild(navigationCurrentMonth);\n\t\tmonthsNav.appendChild(nextMonthNav);\n\n\t\tcalendarContainer.appendChild(monthsNav);\n\t\tupdateNavigationCurrentMonth();\n\t};\n\n\tbuildWeekdays = function buildWeekdays() {\n\t\tweekdayContainer = createElement(\"div\", \"flatpickr-weekdays\");\n\t\tvar firstDayOfWeek = self.l10n.firstDayOfWeek;\n\n\t\tvar weekdays = self.l10n.weekdays.shorthand.slice();\n\n\t\tif (firstDayOfWeek > 0 && firstDayOfWeek < weekdays.length) {\n\t\t\tweekdays = [].concat(weekdays.splice(firstDayOfWeek, weekdays.length), weekdays.splice(0, firstDayOfWeek));\n\t\t}\n\n\t\tif (self.config.weekNumbers) {\n\t\t\tweekdayContainer.innerHTML = \"<span>\" + self.l10n.weekAbbreviation + \"</span>\";\n\t\t}\n\n\t\tweekdayContainer.innerHTML += \"<span>\" + weekdays.join(\"</span><span>\") + \"</span>\";\n\n\t\tcalendarContainer.appendChild(weekdayContainer);\n\t};\n\n\tbuildWeeks = function buildWeeks() {\n\t\tcalendarContainer.classList.add(\"hasWeeks\");\n\n\t\tweekNumbers = createElement(\"div\", \"flatpickr-weeks\");\n\t\tcalendarContainer.appendChild(weekNumbers);\n\t};\n\n\tbuildDays = function buildDays() {\n\t\tvar firstOfMonth = (new Date(self.currentYear, self.currentMonth, 1).getDay() - self.l10n.firstDayOfWeek + 7) % 7,\n\t\t    daysInMonth = getDaysinMonth(),\n\t\t    prevMonthDays = getDaysinMonth((self.currentMonth - 1 + 12) % 12),\n\t\t    days = document.createDocumentFragment();\n\n\t\tvar dayNumber = prevMonthDays + 1 - firstOfMonth,\n\t\t    currentDate = void 0,\n\t\t    dateIsDisabled = void 0;\n\n\t\tif (self.config.weekNumbers) {\n\t\t\tweekNumbers.innerHTML = \"\";\n\t\t}\n\n\t\tcalendar.innerHTML = \"\";\n\n\t\tself.config.minDate = uDate(self.config.minDate, true);\n\t\tself.config.maxDate = uDate(self.config.maxDate, true);\n\n\t\t// prepend days from the ending of previous month\n\t\tfor (; dayNumber <= prevMonthDays; dayNumber++) {\n\t\t\tvar curDate = new Date(self.currentYear, self.currentMonth - 1, dayNumber, 0, 0, 0, 0, 0),\n\t\t\t    dateIsEnabled = isEnabled(curDate),\n\t\t\t    dayElem = createElement(\"span\", dateIsEnabled ? \"flatpickr-day prevMonthDay\" : \"disabled\", dayNumber);\n\n\t\t\tif (dateIsEnabled) {\n\t\t\t\tdayElem.tabIndex = 0;\n\t\t\t}\n\n\t\t\tdays.appendChild(dayElem);\n\t\t}\n\n\t\t// Start at 1 since there is no 0th day\n\t\tfor (dayNumber = 1; dayNumber <= daysInMonth; dayNumber++) {\n\t\t\tcurrentDate = new Date(self.currentYear, self.currentMonth, dayNumber, 0, 0, 0, 0, 0);\n\n\t\t\tif (self.config.weekNumbers && dayNumber % 7 === 1) {\n\t\t\t\tweekNumbers.appendChild(createElement(\"span\", \"disabled flatpickr-day\", currentDate.fp_getWeek()));\n\t\t\t}\n\n\t\t\tdateIsDisabled = !isEnabled(currentDate);\n\n\t\t\tvar dayElement = createElement(\"span\", dateIsDisabled ? \"disabled\" : \"flatpickr-day\", dayNumber);\n\n\t\t\tif (!dateIsDisabled) {\n\t\t\t\tdayElement.tabIndex = 0;\n\n\t\t\t\tif (equalDates(currentDate, now)) {\n\t\t\t\t\tdayElement.classList.add(\"today\");\n\t\t\t\t}\n\n\t\t\t\tif (self.selectedDateObj && equalDates(currentDate, self.selectedDateObj)) {\n\t\t\t\t\tdayElement.classList.add(\"selected\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdays.appendChild(dayElement);\n\t\t}\n\n\t\t// append days from the next month\n\t\tfor (var dayNum = daysInMonth + 1; dayNum <= 42 - firstOfMonth; dayNum++) {\n\t\t\tvar _curDate = new Date(self.currentYear, self.currentMonth + 1, dayNum % daysInMonth, 0, 0, 0, 0, 0),\n\t\t\t    _dateIsEnabled = isEnabled(_curDate),\n\t\t\t    _dayElement = createElement(\"span\", _dateIsEnabled ? \"nextMonthDay flatpickr-day\" : \"disabled\", dayNum % daysInMonth);\n\n\t\t\tif (self.config.weekNumbers && dayNum % 7 === 1) {\n\t\t\t\tweekNumbers.appendChild(createElement(\"span\", \"disabled\", _curDate.fp_getWeek()));\n\t\t\t}\n\n\t\t\tif (_dateIsEnabled) {\n\t\t\t\t_dayElement.tabIndex = 0;\n\t\t\t}\n\n\t\t\tdays.appendChild(_dayElement);\n\t\t}\n\n\t\tcalendar.appendChild(days);\n\t};\n\n\tbuildTime = function buildTime() {\n\t\ttimeContainer = createElement(\"div\", \"flatpickr-time\");\n\t\ttimeContainer.tabIndex = -1;\n\t\tvar separator = createElement(\"span\", \"flatpickr-time-separator\", \":\");\n\n\t\tself.hourElement = createElement(\"input\", \"flatpickr-hour\");\n\t\tself.minuteElement = createElement(\"input\", \"flatpickr-minute\");\n\n\t\tself.hourElement.tabIndex = self.minuteElement.tabIndex = 0;\n\t\tself.hourElement.type = self.minuteElement.type = \"number\";\n\n\t\tself.hourElement.value = self.selectedDateObj ? pad(self.selectedDateObj.getHours()) : 12;\n\n\t\tself.minuteElement.value = self.selectedDateObj ? pad(self.selectedDateObj.getMinutes()) : \"00\";\n\n\t\tself.hourElement.step = self.config.hourIncrement;\n\t\tself.minuteElement.step = self.config.minuteIncrement;\n\n\t\tself.hourElement.min = -self.config.time_24hr;\n\t\tself.hourElement.max = self.config.time_24hr ? 24 : 13;\n\n\t\tself.minuteElement.min = -self.minuteElement.step;\n\t\tself.minuteElement.max = 60;\n\n\t\tself.hourElement.title = self.minuteElement.title = self.l10n.scrollTitle;\n\n\t\ttimeContainer.appendChild(self.hourElement);\n\t\ttimeContainer.appendChild(separator);\n\t\ttimeContainer.appendChild(self.minuteElement);\n\n\t\tif (self.config.enableSeconds) {\n\t\t\ttimeContainer.classList.add(\"has-seconds\");\n\n\t\t\tself.secondElement = createElement(\"input\", \"flatpickr-second\");\n\t\t\tself.secondElement.type = \"number\";\n\t\t\tself.secondElement.value = self.selectedDateObj ? pad(self.selectedDateObj.getSeconds()) : \"00\";\n\n\t\t\tself.secondElement.step = self.minuteElement.step;\n\t\t\tself.secondElement.min = self.minuteElement.min;\n\t\t\tself.secondElement.max = self.minuteElement.max;\n\n\t\t\ttimeContainer.appendChild(createElement(\"span\", \"flatpickr-time-separator\", \":\"));\n\t\t\ttimeContainer.appendChild(self.secondElement);\n\t\t}\n\n\t\tif (!self.config.time_24hr) {\n\t\t\t// add self.amPM if appropriate\n\t\t\tself.amPM = createElement(\"span\", \"flatpickr-am-pm\", [\"AM\", \"PM\"][self.hourElement.value > 11 | 0]);\n\t\t\tself.amPM.title = self.l10n.toggleTitle;\n\t\t\tself.amPM.tabIndex = 0;\n\t\t\ttimeContainer.appendChild(self.amPM);\n\t\t}\n\n\t\tcalendarContainer.appendChild(timeContainer);\n\t};\n\n\tbind = function bind() {\n\t\tdocument.addEventListener(\"keydown\", onKeyDown);\n\t\twindow.addEventListener(\"resize\", onResize);\n\n\t\tif (self.config.clickOpens) {\n\t\t\t(self.altInput || self.input).addEventListener(\"click\", self.open);\n\t\t\t(self.altInput || self.input).addEventListener(\"focus\", self.open);\n\t\t}\n\n\t\tif (self.config.wrap && self.element.querySelector(\"[data-open]\")) {\n\t\t\tself.element.querySelector(\"[data-open]\").addEventListener(\"click\", self.open);\n\t\t}\n\n\t\tif (self.config.wrap && self.element.querySelector(\"[data-close]\")) {\n\t\t\tself.element.querySelector(\"[data-close]\").addEventListener(\"click\", self.close);\n\t\t}\n\n\t\tif (self.config.wrap && self.element.querySelector(\"[data-toggle]\")) {\n\t\t\tself.element.querySelector(\"[data-toggle]\").addEventListener(\"click\", self.toggle);\n\t\t}\n\n\t\tif (self.config.wrap && self.element.querySelector(\"[data-clear]\")) {\n\t\t\tself.element.querySelector(\"[data-clear]\").addEventListener(\"click\", self.clear);\n\t\t}\n\n\t\tif (!self.config.noCalendar) {\n\t\t\tprevMonthNav.addEventListener(\"click\", function () {\n\t\t\t\tchangeMonth(-1);\n\t\t\t});\n\n\t\t\tnextMonthNav.addEventListener(\"click\", function () {\n\t\t\t\tchangeMonth(1);\n\t\t\t});\n\n\t\t\tcurrentYearElement.addEventListener(\"wheel\", yearScroll);\n\t\t\tcurrentYearElement.addEventListener(\"focus\", currentYearElement.select);\n\n\t\t\tcurrentYearElement.addEventListener(\"input\", function (event) {\n\t\t\t\tself.currentYear = parseInt(event.target.value, 10);\n\t\t\t\tself.redraw();\n\t\t\t});\n\n\t\t\tcalendar.addEventListener(\"click\", selectDate);\n\t\t}\n\n\t\tdocument.addEventListener(\"click\", documentClick, true);\n\t\tdocument.addEventListener(\"focus\", documentClick, true);\n\n\t\tif (self.config.enableTime) {\n\t\t\tself.hourElement.addEventListener(\"wheel\", timeWrapper);\n\t\t\tself.minuteElement.addEventListener(\"wheel\", timeWrapper);\n\n\t\t\tself.hourElement.addEventListener(\"input\", timeWrapper);\n\t\t\tself.minuteElement.addEventListener(\"input\", timeWrapper);\n\n\t\t\tself.hourElement.addEventListener(\"mouseout\", updateValue);\n\t\t\tself.minuteElement.addEventListener(\"mouseout\", updateValue);\n\n\t\t\tself.hourElement.addEventListener(\"change\", updateValue);\n\t\t\tself.minuteElement.addEventListener(\"change\", updateValue);\n\n\t\t\tself.hourElement.addEventListener(\"focus\", self.hourElement.select);\n\t\t\tself.minuteElement.addEventListener(\"focus\", self.minuteElement.select);\n\n\t\t\tif (self.config.enableSeconds) {\n\t\t\t\tself.secondElement.addEventListener(\"wheel\", timeWrapper);\n\t\t\t\tself.secondElement.addEventListener(\"input\", timeWrapper);\n\t\t\t\tself.secondElement.addEventListener(\"mouseout\", updateValue);\n\t\t\t\tself.secondElement.addEventListener(\"change\", updateValue);\n\t\t\t\tself.secondElement.addEventListener(\"focus\", self.secondElement.select);\n\t\t\t}\n\n\t\t\tif (!self.config.time_24hr) {\n\t\t\t\tself.amPM.addEventListener(\"click\", amPMToggle);\n\n\t\t\t\tself.amPM.addEventListener(\"wheel\", amPMToggle);\n\t\t\t\tself.amPM.addEventListener(\"mouseout\", updateValue);\n\n\t\t\t\tself.amPM.addEventListener(\"keydown\", function (e) {\n\t\t\t\t\tif (e.which === 38 || e.which === 40) {\n\t\t\t\t\t\tamPMToggle(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (document.createEvent) {\n\t\t\tclickEvt = document.createEvent(\"MouseEvent\");\n\t\t\t// without all these args ms edge spergs out\n\t\t\tclickEvt.initMouseEvent(\"click\", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n\t\t} else {\n\t\t\tclickEvt = new MouseEvent(\"click\", {\n\t\t\t\tview: window,\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true\n\t\t\t});\n\t\t}\n\t};\n\n\tself.open = function () {\n\t\tif (self.isOpen || (self.altInput || self.input).disabled || self.config.inline) {\n\t\t\treturn;\n\t\t} else if (!self.config.static) {\n\t\t\tself.positionCalendar();\n\t\t}\n\n\t\tself.isOpen = true;\n\n\t\twrapperElement.classList.add(\"open\");\n\n\t\tif (!self.config.allowInput) {\n\t\t\t(self.altInput || self.input).blur();\n\t\t\t(self.config.noCalendar ? timeContainer : calendar).focus();\n\t\t}\n\n\t\t(self.altInput || self.input).classList.add(\"active\");\n\n\t\tif (self.config.onOpen) {\n\t\t\tself.config.onOpen(self.selectedDateObj, self.input.value, self);\n\t\t}\n\t};\n\n\t// For calendars inserted in BODY (as opposed to inline wrapper)\n\t// it\"s necessary to properly calculate top/left position.\n\tself.positionCalendar = function () {\n\t\tvar calendarHeight = calendarContainer.offsetHeight,\n\t\t    input = self.altInput || self.input,\n\t\t    inputBounds = input.getBoundingClientRect(),\n\t\t    distanceFromBottom = window.innerHeight - inputBounds.bottom + input.offsetHeight;\n\n\t\tvar top = void 0,\n\t\t    left = window.pageXOffset + inputBounds.left;\n\n\t\tif (distanceFromBottom < calendarHeight) {\n\t\t\ttop = window.pageYOffset - calendarHeight + inputBounds.top - 2;\n\t\t\tcalendarContainer.classList.remove(\"arrowTop\");\n\t\t\tcalendarContainer.classList.add(\"arrowBottom\");\n\t\t} else {\n\t\t\ttop = window.pageYOffset + input.offsetHeight + inputBounds.top + 2;\n\t\t\tcalendarContainer.classList.remove(\"arrowBottom\");\n\t\t\tcalendarContainer.classList.add(\"arrowTop\");\n\t\t}\n\n\t\twrapperElement.style.top = top + \"px\";\n\t\twrapperElement.style.left = left + \"px\";\n\t};\n\n\tself.toggle = function () {\n\t\tif (self.isOpen) {\n\t\t\tself.close();\n\t\t} else {\n\t\t\tself.open();\n\t\t}\n\t};\n\n\tself.close = function () {\n\t\tself.isOpen = false;\n\t\twrapperElement.classList.remove(\"open\");\n\t\t(self.altInput || self.input).classList.remove(\"active\");\n\n\t\tif (self.config.onClose) {\n\t\t\tself.config.onClose(self.selectedDateObj, self.input.value, self);\n\t\t}\n\t};\n\n\tself.clear = function () {\n\t\tself.input.value = \"\";\n\n\t\tif (self.altInput) {\n\t\t\tself.altInput.value = \"\";\n\t\t}\n\n\t\tself.selectedDateObj = null;\n\n\t\ttriggerChange();\n\t\tself.jumpToDate();\n\t};\n\n\ttriggerChange = function triggerChange() {\n\t\tself.input.dispatchEvent(clickEvt);\n\n\t\tif (self.config.onChange) {\n\t\t\tself.config.onChange(self.selectedDateObj, self.input.value, self);\n\t\t}\n\t};\n\n\tself.destroy = function () {\n\t\tdocument.removeEventListener(\"click\", documentClick, false);\n\n\t\tif (self.altInput) {\n\t\t\tself.altInput.parentNode.removeChild(self.altInput);\n\t\t}\n\n\t\tif (self.config.inline) {\n\t\t\tvar parent = self.element.parentNode,\n\t\t\t    removedElement = parent.removeChild(self.element);\n\n\t\t\tparent.removeChild(calendarContainer);\n\t\t\tparent.parentNode.replaceChild(removedElement, parent);\n\t\t} else {\n\t\t\tdocument.getElementsByTagName(\"body\")[0].removeChild(wrapperElement);\n\t\t}\n\t};\n\n\tself.redraw = function () {\n\t\tif (self.config.noCalendar) {\n\t\t\treturn;\n\t\t}\n\n\t\tupdateNavigationCurrentMonth();\n\t\tbuildDays();\n\t};\n\n\tself.jumpToDate = function (jumpDate) {\n\t\tjumpDate = uDate(jumpDate || self.selectedDateObj || self.config.defaultDate || self.config.minDate || now);\n\n\t\tself.currentYear = jumpDate.getFullYear();\n\t\tself.currentMonth = jumpDate.getMonth();\n\t\tself.redraw();\n\t};\n\n\tself.setDate = function (date, triggerChangeEvent) {\n\t\tdate = uDate(date);\n\n\t\tif (date instanceof Date && date.getTime()) {\n\t\t\tself.selectedDateObj = uDate(date);\n\t\t\tself.jumpToDate(self.selectedDateObj);\n\t\t\tupdateValue();\n\n\t\t\tif (triggerChangeEvent) {\n\t\t\t\ttriggerChange();\n\t\t\t}\n\t\t}\n\t};\n\n\tself.setTime = function (hour, minute, triggerChangeEvent) {\n\t\tif (!self.selectedDateObj) {\n\t\t\treturn;\n\t\t}\n\n\t\tself.hourElement.value = parseInt(hour, 10) % 24;\n\t\tself.minuteElement.value = parseInt(minute || 0, 10) % 60;\n\n\t\tif (!self.config.time_24hr) {\n\t\t\tself.amPM.innerHTML = hour > 11 ? \"PM\" : \"AM\";\n\t\t}\n\n\t\tupdateValue();\n\n\t\tif (triggerChangeEvent) {\n\t\t\ttriggerChange();\n\t\t}\n\t};\n\n\tself.set = function (key, value) {\n\t\tif (key in self.config) {\n\t\t\tself.config[key] = value;\n\t\t\tself.jumpToDate();\n\t\t}\n\t};\n\n\tamPMToggle = function amPMToggle(e) {\n\t\te.preventDefault();\n\t\tself.amPM.textContent = [\"AM\", \"PM\"][self.amPM.innerHTML === \"AM\" | 0];\n\t};\n\n\tonKeyDown = function onKeyDown(e) {\n\t\tif (!self.isOpen || self.config.enableTime && timeContainer.contains(e.target)) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (e.which) {\n\t\t\tcase 13:\n\t\t\t\tselectDate(e);\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tself.close();\n\t\t\t\tbreak;\n\n\t\t\tcase 37:\n\t\t\t\tchangeMonth(-1);\n\t\t\t\tbreak;\n\n\t\t\tcase 38:\n\t\t\t\te.preventDefault();\n\t\t\t\tself.currentYear++;\n\t\t\t\tself.redraw();\n\t\t\t\tbreak;\n\n\t\t\tcase 39:\n\t\t\t\tchangeMonth(1);\n\t\t\t\tbreak;\n\n\t\t\tcase 40:\n\t\t\t\te.preventDefault();\n\t\t\t\tself.currentYear--;\n\t\t\t\tself.redraw();\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tonResize = debounce(function () {\n\t\tif (self.isOpen && !self.config.inline && !self.config.static) {\n\t\t\tself.positionCalendar();\n\t\t}\n\t}, 300);\n\n\ttry {\n\t\tinit();\n\t} catch (error) {\n\t\t// skip and carry on\n\t\tconsole.error(error);\n\t\tconsole.info(self.element);\n\t}\n\n\treturn self;\n};\n\nflatpickr.init.prototype = {\n\n\tdefaultConfig: {},\n\n\tl10n: {\n\t\tweekdays: {\n\t\t\tshorthand: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n\t\t\tlonghand: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\n\t\t},\n\t\tmonths: {\n\t\t\tshorthand: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n\t\t\tlonghand: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\n\t\t},\n\t\tdaysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n\t\tfirstDayOfWeek: 0,\n\t\tordinal: function ordinal(nth) {\n\t\t\tvar s = nth % 100;\n\t\t\tif (s > 3 && s < 21) return \"th\";\n\t\t\tswitch (s % 10) {\n\t\t\t\tcase 1:\n\t\t\t\t\treturn \"st\";\n\t\t\t\tcase 2:\n\t\t\t\t\treturn \"nd\";\n\t\t\t\tcase 3:\n\t\t\t\t\treturn \"rd\";\n\t\t\t\tdefault:\n\t\t\t\t\treturn \"th\";\n\t\t\t}\n\t\t},\n\t\tweekAbbreviation: \"Wk\",\n\t\tscrollTitle: \"Scroll to increment\",\n\t\ttoggleTitle: \"Click to toggle\"\n\t}\n\n};\n\nDate.prototype.fp_incr = function (days) {\n\treturn new Date(this.getFullYear(), this.getMonth(), this.getDate() + parseInt(days, 10));\n};\n\nDate.prototype.fp_isUTC = false;\nDate.prototype.fp_toUTC = function () {\n\tvar newDate = new Date(this.getTime() + this.getTimezoneOffset() * 60000);\n\tnewDate.fp_isUTC = true;\n\n\treturn newDate;\n};\n\nDate.prototype.fp_getWeek = function () {\n\tvar date = new Date(this.getTime());\n\tdate.setHours(0, 0, 0, 0);\n\n\t// Thursday in current week decides the year.\n\tdate.setDate(date.getDate() + 3 - (date.getDay() + 6) % 7);\n\t// January 4 is always in week 1.\n\tvar week1 = new Date(date.getFullYear(), 0, 4);\n\t// Adjust to Thursday in week 1 and count number of weeks from date to week1.\n\treturn 1 + Math.round(((date.getTime() - week1.getTime()) / 86400000 - 3 + (week1.getDay() + 6) % 7) / 7);\n};\n\n// classList polyfill\nif (!(\"classList\" in document.documentElement) && Object.defineProperty && typeof HTMLElement !== \"undefined\") {\n\tObject.defineProperty(HTMLElement.prototype, \"classList\", {\n\t\tget: function get() {\n\t\t\tvar selfElements = this;\n\t\t\tfunction update(fn) {\n\t\t\t\treturn function (value) {\n\t\t\t\t\tvar classes = selfElements.className.split(/\\s+/);\n\t\t\t\t\tvar index = classes.indexOf(value);\n\n\t\t\t\t\tfn(classes, index, value);\n\t\t\t\t\tselfElements.className = classes.join(\" \");\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar ret = {\n\t\t\t\tadd: update(function (classes, index, value) {\n\t\t\t\t\treturn ~index || classes.push(value);\n\t\t\t\t}),\n\t\t\t\tremove: update(function (classes, index) {\n\t\t\t\t\treturn ~index && classes.splice(index, 1);\n\t\t\t\t}),\n\t\t\t\ttoggle: update(function (classes, index, value) {\n\t\t\t\t\tif (~index) {\n\t\t\t\t\t\tclasses.splice(index, 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclasses.push(value);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tcontains: function contains(value) {\n\t\t\t\t\treturn !! ~selfElements.className.split(/\\s+/).indexOf(value);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn ret;\n\t\t}\n\t});\n}\n\nif (true) {\n\tmodule.exports = flatpickr;\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9ub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZmxhdHBpY2tyLmpzP2QyYmMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgZmxhdHBpY2tyID0gZnVuY3Rpb24gZmxhdHBpY2tyKHNlbGVjdG9yLCBjb25maWcpIHtcblx0dmFyIGVsZW1lbnRzID0gdm9pZCAwO1xuXG5cdHZhciBjcmVhdGVJbnN0YW5jZSA9IGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKGVsZW1lbnQpIHtcblx0XHRpZiAoZWxlbWVudC5fZmxhdHBpY2tyKSB7XG5cdFx0XHRlbGVtZW50Ll9mbGF0cGlja3IuZGVzdHJveSgpO1xuXHRcdH1cblxuXHRcdGVsZW1lbnQuX2ZsYXRwaWNrciA9IG5ldyBmbGF0cGlja3IuaW5pdChlbGVtZW50LCBjb25maWcpO1xuXHRcdHJldHVybiBlbGVtZW50Ll9mbGF0cGlja3I7XG5cdH07XG5cblx0aWYgKHNlbGVjdG9yLm5vZGVOYW1lKSB7XG5cdFx0cmV0dXJuIGNyZWF0ZUluc3RhbmNlKHNlbGVjdG9yKTtcblx0fVxuXHQvKlxuIFV0aWxpemUgdGhlIHBlcmZvcm1hbmNlIG9mIG5hdGl2ZSBnZXR0ZXJzIGlmIGFwcGxpY2FibGVcbiBodHRwczovL2pzcGVyZi5jb20vZ2V0ZWxlbWVudHNieWNsYXNzbmFtZS12cy1xdWVyeXNlbGVjdG9yYWxsLzE4XG4gaHR0cHM6Ly9qc3BlcmYuY29tL2pxdWVyeS12cy1qYXZhc2NyaXB0LXBlcmZvcm1hbmNlLWNvbXBhcmlzb24vMjJcbiAqL1xuXHRlbHNlIGlmICgvXiNbYS16QS1aMC05XFwtX10qJC8udGVzdChzZWxlY3RvcikpIHtcblx0XHRcdHJldHVybiBjcmVhdGVJbnN0YW5jZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3Rvci5zbGljZSgxKSkpO1xuXHRcdH0gZWxzZSBpZiAoL15cXC5bYS16QS1aMC05XFwtX10qJC8udGVzdChzZWxlY3RvcikpIHtcblx0XHRcdGVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShzZWxlY3Rvci5zbGljZSgxKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cdFx0fVxuXG5cdHZhciBpbnN0YW5jZXMgPSBbXTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0aW5zdGFuY2VzLnB1c2goY3JlYXRlSW5zdGFuY2UoZWxlbWVudHNbaV0pKTtcblx0fVxuXG5cdGlmIChpbnN0YW5jZXMubGVuZ3RoID09PSAxKSB7XG5cdFx0cmV0dXJuIGluc3RhbmNlc1swXTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0Y2FsZW5kYXJzOiBpbnN0YW5jZXMsXG5cdFx0YnlJRDogZnVuY3Rpb24gYnlJRChpZCkge1xuXHRcdFx0cmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5fZmxhdHBpY2tyO1xuXHRcdH1cblx0fTtcbn07XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZsYXRwaWNrci5pbml0ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGluc3RhbmNlQ29uZmlnKSB7XG5cdGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodGFnLCBjbGFzc05hbWUsIGNvbnRlbnQpIHtcblx0XHR2YXIgbmV3RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcblxuXHRcdGlmIChjb250ZW50KSB7XG5cdFx0XHRuZXdFbGVtZW50LnRleHRDb250ZW50ID0gY29udGVudDtcblx0XHR9XG5cblx0XHRpZiAoY2xhc3NOYW1lKSB7XG5cdFx0XHRuZXdFbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbmV3RWxlbWVudDtcblx0fVxuXG5cdHZhciBkZWJvdW5jZSA9IGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuXHRcdHZhciB0aW1lb3V0ID0gdm9pZCAwO1xuXHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHRcdFx0XHRhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgY29udGV4dCA9IHRoaXM7XG5cblx0XHRcdHZhciBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuXHRcdFx0XHR0aW1lb3V0ID0gbnVsbDtcblx0XHRcdFx0aWYgKCFpbW1lZGlhdGUpIHtcblx0XHRcdFx0XHRmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0XHR0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG5cdFx0XHRpZiAoaW1tZWRpYXRlICYmICF0aW1lb3V0KSB7XG5cdFx0XHRcdGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fTtcblxuXHQvLyBmdW5jdGlvbnNcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHR2YXIgcGFyc2VDb25maWcgPSB2b2lkIDAsXG5cdCAgICBpbml0ID0gdm9pZCAwLFxuXHQgICAgd3JhcCA9IHZvaWQgMCxcblx0ICAgIHVEYXRlID0gdm9pZCAwLFxuXHQgICAgZXF1YWxEYXRlcyA9IHZvaWQgMCxcblx0ICAgIHBhZCA9IHZvaWQgMCxcblx0ICAgIG1vbnRoVG9TdHIgPSB2b2lkIDAsXG5cdCAgICBpc0VuYWJsZWQgPSB2b2lkIDAsXG5cdCAgICBidWlsZE1vbnRoTmF2aWdhdGlvbiA9IHZvaWQgMCxcblx0ICAgIGJ1aWxkV2Vla2RheXMgPSB2b2lkIDAsXG5cdCAgICBidWlsZENhbGVuZGFyID0gdm9pZCAwLFxuXHQgICAgYnVpbGREYXlzID0gdm9pZCAwLFxuXHQgICAgYnVpbGRXZWVrcyA9IHZvaWQgMCxcblx0ICAgIGJ1aWxkVGltZSA9IHZvaWQgMCxcblx0ICAgIHRpbWVXcmFwcGVyID0gdm9pZCAwLFxuXHQgICAgeWVhclNjcm9sbCA9IHZvaWQgMCxcblx0ICAgIHVwZGF0ZVZhbHVlID0gdm9pZCAwLFxuXHQgICAgYW1QTVRvZ2dsZSA9IHZvaWQgMCxcblx0ICAgIG9uS2V5RG93biA9IHZvaWQgMCxcblx0ICAgIG9uUmVzaXplID0gdm9pZCAwLFxuXHQgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCA9IHZvaWQgMCxcblx0ICAgIGhhbmRsZVllYXJDaGFuZ2UgPSB2b2lkIDAsXG5cdCAgICBjaGFuZ2VNb250aCA9IHZvaWQgMCxcblx0ICAgIGdldERheXNpbk1vbnRoID0gdm9pZCAwLFxuXHQgICAgZG9jdW1lbnRDbGljayA9IHZvaWQgMCxcblx0ICAgIHNlbGVjdERhdGUgPSB2b2lkIDAsXG5cdCAgICBnZXRSYW5kb21DYWxlbmRhcklkU3RyID0gdm9pZCAwLFxuXHQgICAgYmluZCA9IHZvaWQgMCxcblx0ICAgIHRyaWdnZXJDaGFuZ2UgPSB2b2lkIDA7XG5cblx0Ly8gZWxlbWVudHMgJiB2YXJpYWJsZXNcblx0dmFyIGNhbGVuZGFyQ29udGFpbmVyID0gdm9pZCAwLFxuXHQgICAgd2Vla2RheUNvbnRhaW5lciA9IHZvaWQgMCxcblx0ICAgIHRpbWVDb250YWluZXIgPSB2b2lkIDAsXG5cdCAgICBuYXZpZ2F0aW9uQ3VycmVudE1vbnRoID0gdm9pZCAwLFxuXHQgICAgbW9udGhzTmF2ID0gdm9pZCAwLFxuXHQgICAgcHJldk1vbnRoTmF2ID0gdm9pZCAwLFxuXHQgICAgY3VycmVudFllYXJFbGVtZW50ID0gdm9pZCAwLFxuXHQgICAgY3VycmVudE1vbnRoRWxlbWVudCA9IHZvaWQgMCxcblx0ICAgIG5leHRNb250aE5hdiA9IHZvaWQgMCxcblx0ICAgIGNhbGVuZGFyID0gdm9pZCAwLFxuXHQgICAgd2Vla051bWJlcnMgPSB2b2lkIDAsXG5cdCAgICBub3cgPSBuZXcgRGF0ZSgpLFxuXHQgICAgd3JhcHBlckVsZW1lbnQgPSB2b2lkIDAsXG5cdCAgICBjbGlja0V2dCA9IHZvaWQgMDtcblxuXHRzZWxmLmZvcm1hdHMgPSB7XG5cdFx0Ly8gd2Vla2RheSBuYW1lLCBzaG9ydCwgZS5nLiBUaHVcblx0XHREOiBmdW5jdGlvbiBEKCkge1xuXHRcdFx0cmV0dXJuIHNlbGYubDEwbi53ZWVrZGF5cy5zaG9ydGhhbmRbc2VsZi5mb3JtYXRzLncoKV07XG5cdFx0fSxcblxuXHRcdC8vIGZ1bGwgbW9udGggbmFtZSBlLmcuIEphbnVhcnlcblx0XHRGOiBmdW5jdGlvbiBGKCkge1xuXHRcdFx0cmV0dXJuIG1vbnRoVG9TdHIoc2VsZi5mb3JtYXRzLm4oKSAtIDEsIGZhbHNlKTtcblx0XHR9LFxuXG5cdFx0Ly8gaG91cnMgd2l0aCBsZWFkaW5nIHplcm8gZS5nLiAwM1xuXHRcdEg6IGZ1bmN0aW9uIEgoKSB7XG5cdFx0XHRyZXR1cm4gcGFkKHNlbGYuc2VsZWN0ZWREYXRlT2JqLmdldEhvdXJzKCkpO1xuXHRcdH0sXG5cblx0XHQvLyBkYXkgKDEtMzApIHdpdGggb3JkaW5hbCBzdWZmaXggZS5nLiAxc3QsIDJuZFxuXHRcdEo6IGZ1bmN0aW9uIEooKSB7XG5cdFx0XHRyZXR1cm4gc2VsZi5mb3JtYXRzLmooKSArIHNlbGYubDEwbi5vcmRpbmFsKHNlbGYuZm9ybWF0cy5qKCkpO1xuXHRcdH0sXG5cblx0XHQvLyBBTS9QTVxuXHRcdEs6IGZ1bmN0aW9uIEsoKSB7XG5cdFx0XHRyZXR1cm4gc2VsZi5zZWxlY3RlZERhdGVPYmouZ2V0SG91cnMoKSA+IDExID8gXCJQTVwiIDogXCJBTVwiO1xuXHRcdH0sXG5cblx0XHQvLyBzaG9ydGhhbmQgbW9udGggZS5nLiBKYW4sIFNlcCwgT2N0LCBldGNcblx0XHRNOiBmdW5jdGlvbiBNKCkge1xuXHRcdFx0cmV0dXJuIG1vbnRoVG9TdHIoc2VsZi5mb3JtYXRzLm4oKSAtIDEsIHRydWUpO1xuXHRcdH0sXG5cblx0XHQvLyBzZWNvbmRzIDAwLTU5XG5cdFx0UzogZnVuY3Rpb24gUygpIHtcblx0XHRcdHJldHVybiBwYWQoc2VsZi5zZWxlY3RlZERhdGVPYmouZ2V0U2Vjb25kcygpKTtcblx0XHR9LFxuXG5cdFx0Ly8gdW5peCB0aW1lc3RhbXBcblx0XHRVOiBmdW5jdGlvbiBVKCkge1xuXHRcdFx0cmV0dXJuIHNlbGYuc2VsZWN0ZWREYXRlT2JqLmdldFRpbWUoKSAvIDEwMDA7XG5cdFx0fSxcblxuXHRcdC8vIGZ1bGwgeWVhciBlLmcuIDIwMTZcblx0XHRZOiBmdW5jdGlvbiBZKCkge1xuXHRcdFx0cmV0dXJuIHNlbGYuc2VsZWN0ZWREYXRlT2JqLmdldEZ1bGxZZWFyKCk7XG5cdFx0fSxcblxuXHRcdC8vIGRheSBpbiBtb250aCwgcGFkZGVkICgwMS0zMClcblx0XHRkOiBmdW5jdGlvbiBkKCkge1xuXHRcdFx0cmV0dXJuIHBhZChzZWxmLmZvcm1hdHMuaigpKTtcblx0XHR9LFxuXG5cdFx0Ly8gaG91ciBmcm9tIDEtMTIgKGFtL3BtKVxuXHRcdGg6IGZ1bmN0aW9uIGgoKSB7XG5cdFx0XHRyZXR1cm4gc2VsZi5zZWxlY3RlZERhdGVPYmouZ2V0SG91cnMoKSAlIDEyID8gc2VsZi5zZWxlY3RlZERhdGVPYmouZ2V0SG91cnMoKSAlIDEyIDogMTI7XG5cdFx0fSxcblxuXHRcdC8vIG1pbnV0ZXMsIHBhZGRlZCB3aXRoIGxlYWRpbmcgemVybyBlLmcuIDA5XG5cdFx0aTogZnVuY3Rpb24gaSgpIHtcblx0XHRcdHJldHVybiBwYWQoc2VsZi5zZWxlY3RlZERhdGVPYmouZ2V0TWludXRlcygpKTtcblx0XHR9LFxuXG5cdFx0Ly8gZGF5IGluIG1vbnRoICgxLTMwKVxuXHRcdGo6IGZ1bmN0aW9uIGooKSB7XG5cdFx0XHRyZXR1cm4gc2VsZi5zZWxlY3RlZERhdGVPYmouZ2V0RGF0ZSgpO1xuXHRcdH0sXG5cblx0XHQvLyB3ZWVrZGF5IG5hbWUsIGZ1bGwsIGUuZy4gVGh1cnNkYXlcblx0XHRsOiBmdW5jdGlvbiBsKCkge1xuXHRcdFx0cmV0dXJuIHNlbGYubDEwbi53ZWVrZGF5cy5sb25naGFuZFtzZWxmLmZvcm1hdHMudygpXTtcblx0XHR9LFxuXG5cdFx0Ly8gcGFkZGVkIG1vbnRoIG51bWJlciAoMDEtMTIpXG5cdFx0bTogZnVuY3Rpb24gbSgpIHtcblx0XHRcdHJldHVybiBwYWQoc2VsZi5mb3JtYXRzLm4oKSk7XG5cdFx0fSxcblxuXHRcdC8vIHRoZSBtb250aCBudW1iZXIgKDEtMTIpXG5cdFx0bjogZnVuY3Rpb24gbigpIHtcblx0XHRcdHJldHVybiBzZWxmLnNlbGVjdGVkRGF0ZU9iai5nZXRNb250aCgpICsgMTtcblx0XHR9LFxuXG5cdFx0Ly8gc2Vjb25kcyAwLTU5XG5cdFx0czogZnVuY3Rpb24gcygpIHtcblx0XHRcdHJldHVybiBzZWxmLnNlbGVjdGVkRGF0ZU9iai5nZXRTZWNvbmRzKCk7XG5cdFx0fSxcblxuXHRcdC8vIG51bWJlciBvZiB0aGUgZGF5IG9mIHRoZSB3ZWVrXG5cdFx0dzogZnVuY3Rpb24gdygpIHtcblx0XHRcdHJldHVybiBzZWxmLnNlbGVjdGVkRGF0ZU9iai5nZXREYXkoKTtcblx0XHR9LFxuXG5cdFx0Ly8gbGFzdCB0d28gZGlnaXRzIG9mIHllYXIgZS5nLiAxNiBmb3IgMjAxNlxuXHRcdHk6IGZ1bmN0aW9uIHkoKSB7XG5cdFx0XHRyZXR1cm4gU3RyaW5nKHNlbGYuZm9ybWF0cy5ZKCkpLnN1YnN0cmluZygyKTtcblx0XHR9XG5cdH07XG5cblx0c2VsZi5kZWZhdWx0Q29uZmlnID0ge1xuXHRcdC8qIGlmIHRydWUsIGRhdGVzIHdpbGwgYmUgcGFyc2VkLCBmb3JtYXR0ZWQsIGFuZCBkaXNwbGF5ZWQgaW4gVVRDLlxuICBwcmVsb2FkaW5nIGRhdGUgc3RyaW5ncyB3LyB0aW1lem9uZXMgaXMgcmVjb21tZW5kZWQgYnV0IG5vdCBuZWNlc3NhcnkgKi9cblx0XHR1dGM6IGZhbHNlLFxuXG5cdFx0Ly8gd3JhcDogc2VlIGh0dHBzOi8vY2htbG4uZ2l0aHViLmlvL2ZsYXRwaWNrci8jc3RyYXBcblx0XHR3cmFwOiBmYWxzZSxcblxuXHRcdC8vIGVuYWJsZXMgd2VlayBudW1iZXJzXG5cdFx0d2Vla051bWJlcnM6IGZhbHNlLFxuXG5cdFx0YWxsb3dJbnB1dDogZmFsc2UsXG5cblx0XHQvKlxuICBcdGNsaWNraW5nIG9uIGlucHV0IG9wZW5zIHRoZSBkYXRlKHRpbWUpcGlja2VyLlxuICBcdGRpc2FibGUgaWYgeW91IHdpc2ggdG8gb3BlbiB0aGUgY2FsZW5kYXIgbWFudWFsbHkgd2l0aCAub3BlbigpXG4gICovXG5cdFx0Y2xpY2tPcGVuczogdHJ1ZSxcblxuXHRcdC8vIGRpc3BsYXkgdGltZSBwaWNrZXIgaW4gMjQgaG91ciBtb2RlXG5cdFx0dGltZV8yNGhyOiBmYWxzZSxcblxuXHRcdC8vIGVuYWJsZXMgdGhlIHRpbWUgcGlja2VyIGZ1bmN0aW9uYWxpdHlcblx0XHRlbmFibGVUaW1lOiBmYWxzZSxcblxuXHRcdC8vIG5vQ2FsZW5kYXI6IHRydWUgd2lsbCBoaWRlIHRoZSBjYWxlbmRhci4gdXNlIGZvciBhIHRpbWUgcGlja2VyIGFsb25nIHcvIGVuYWJsZVRpbWVcblx0XHRub0NhbGVuZGFyOiBmYWxzZSxcblxuXHRcdC8vIG1vcmUgZGF0ZSBmb3JtYXQgY2hhcnMgYXQgaHR0cHM6Ly9jaG1sbi5naXRodWIuaW8vZmxhdHBpY2tyLyNkYXRlZm9ybWF0XG5cdFx0ZGF0ZUZvcm1hdDogXCJZLW0tZFwiLFxuXG5cdFx0Ly8gYWx0SW5wdXQgLSBzZWUgaHR0cHM6Ly9jaG1sbi5naXRodWIuaW8vZmxhdHBpY2tyLyNhbHRpbnB1dFxuXHRcdGFsdElucHV0OiBmYWxzZSxcblxuXHRcdC8vIHRoZSBjcmVhdGVkIGFsdElucHV0IGVsZW1lbnQgd2lsbCBoYXZlIHRoaXMgY2xhc3MuXG5cdFx0YWx0SW5wdXRDbGFzczogXCJcIixcblxuXHRcdC8vIHNhbWUgYXMgZGF0ZUZvcm1hdCwgYnV0IGZvciBhbHRJbnB1dFxuXHRcdGFsdEZvcm1hdDogXCJGIGosIFlcIiwgLy8gZGVmYXVsdHMgdG8gZS5nLiBKdW5lIDEwLCAyMDE2XG5cblx0XHQvLyBkZWZhdWx0RGF0ZSAtIGVpdGhlciBhIGRhdGVzdHJpbmcgb3IgYSBkYXRlIG9iamVjdC4gdXNlZCBmb3IgZGF0ZXRpbWVwaWNrZXJcInMgaW5pdGlhbCB2YWx1ZVxuXHRcdGRlZmF1bHREYXRlOiBudWxsLFxuXG5cdFx0Ly8gdGhlIG1pbmltdW0gZGF0ZSB0aGF0IHVzZXIgY2FuIHBpY2sgKGluY2x1c2l2ZSlcblx0XHRtaW5EYXRlOiBudWxsLFxuXG5cdFx0Ly8gdGhlIG1heGltdW0gZGF0ZSB0aGF0IHVzZXIgY2FuIHBpY2sgKGluY2x1c2l2ZSlcblx0XHRtYXhEYXRlOiBudWxsLFxuXG5cdFx0Ly8gZGF0ZXBhcnNlciB0aGF0IHRyYW5zZm9ybXMgYSBnaXZlbiBzdHJpbmcgdG8gYSBkYXRlIG9iamVjdFxuXHRcdHBhcnNlRGF0ZTogbnVsbCxcblxuXHRcdC8vIHNlZSBodHRwczovL2NobWxuLmdpdGh1Yi5pby9mbGF0cGlja3IvI2Rpc2FibGVcblx0XHRlbmFibGU6IFtdLFxuXG5cdFx0Ly8gc2VlIGh0dHBzOi8vY2htbG4uZ2l0aHViLmlvL2ZsYXRwaWNrci8jZGlzYWJsZVxuXHRcdGRpc2FibGU6IFtdLFxuXG5cdFx0Ly8gZGlzcGxheSB0aGUgc2hvcnQgdmVyc2lvbiBvZiBtb250aCBuYW1lcyAtIGUuZy4gU2VwIGluc3RlYWQgb2YgU2VwdGVtYmVyXG5cdFx0c2hvcnRoYW5kQ3VycmVudE1vbnRoOiBmYWxzZSxcblxuXHRcdC8vIGRpc3BsYXlzIGNhbGVuZGFyIGlubGluZS4gc2VlIGh0dHBzOi8vY2htbG4uZ2l0aHViLmlvL2ZsYXRwaWNrci8jaW5saW5lLWNhbGVuZGFyXG5cdFx0aW5saW5lOiBmYWxzZSxcblxuXHRcdC8vIHBvc2l0aW9uIGNhbGVuZGFyIGluc2lkZSB3cmFwcGVyIGFuZCBuZXh0IHRvIHRoZSBpbnB1dCBlbGVtZW50XG5cdFx0Ly8gbGVhdmUgYXQgZmFsc2UgdW5sZXNzIHlvdSBrbm93IHdoYXQgeW91XCJyZSBkb2luZ1xuXHRcdHN0YXRpYzogZmFsc2UsXG5cblx0XHQvLyBjb2RlIGZvciBwcmV2aW91cy9uZXh0IGljb25zLiB0aGlzIGlzIHdoZXJlIHlvdSBwdXQgeW91ciBjdXN0b20gaWNvbiBjb2RlIGUuZy4gZm9udGF3ZXNvbWVcblx0XHRwcmV2QXJyb3c6IFwiJmx0O1wiLFxuXHRcdG5leHRBcnJvdzogXCImZ3Q7XCIsXG5cblx0XHQvLyBlbmFibGVzIHNlY29uZHMgaW4gdGhlIHRpbWUgcGlja2VyXG5cdFx0ZW5hYmxlU2Vjb25kczogZmFsc2UsXG5cblx0XHQvLyBzdGVwIHNpemUgdXNlZCB3aGVuIHNjcm9sbGluZy9pbmNyZW1lbnRpbmcgdGhlIGhvdXIgZWxlbWVudFxuXHRcdGhvdXJJbmNyZW1lbnQ6IDEsXG5cblx0XHQvLyBzdGVwIHNpemUgdXNlZCB3aGVuIHNjcm9sbGluZy9pbmNyZW1lbnRpbmcgdGhlIG1pbnV0ZSBlbGVtZW50XG5cdFx0bWludXRlSW5jcmVtZW50OiA1LFxuXG5cdFx0Ly8gb25DaGFuZ2UgY2FsbGJhY2sgd2hlbiB1c2VyIHNlbGVjdHMgYSBkYXRlIG9yIHRpbWVcblx0XHRvbkNoYW5nZTogbnVsbCwgLy8gZnVuY3Rpb24gKGRhdGVPYmosIGRhdGVTdHIpIHt9XG5cblx0XHQvLyBjYWxsZWQgZXZlcnkgdGltZSBjYWxlbmRhciBpcyBvcGVuZWRcblx0XHRvbk9wZW46IG51bGwsIC8vIGZ1bmN0aW9uIChkYXRlT2JqLCBkYXRlU3RyKSB7fVxuXG5cdFx0Ly8gY2FsbGVkIGV2ZXJ5IHRpbWUgY2FsZW5kYXIgaXMgY2xvc2VkXG5cdFx0b25DbG9zZTogbnVsbCwgLy8gZnVuY3Rpb24gKGRhdGVPYmosIGRhdGVTdHIpIHt9XG5cblx0XHRvblZhbHVlVXBkYXRlOiBudWxsXG5cdH07XG5cblx0aW5pdCA9IGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0aW5zdGFuY2VDb25maWcgPSBpbnN0YW5jZUNvbmZpZyB8fCB7fTtcblxuXHRcdHNlbGYuZWxlbWVudCA9IGVsZW1lbnQ7XG5cblx0XHRwYXJzZUNvbmZpZygpO1xuXG5cdFx0c2VsZi5pbnB1dCA9IHNlbGYuY29uZmlnLndyYXAgPyBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1pbnB1dF1cIikgOiBlbGVtZW50O1xuXHRcdHNlbGYuaW5wdXQuY2xhc3NMaXN0LmFkZChcImZsYXRwaWNrci1pbnB1dFwiKTtcblxuXHRcdGlmIChzZWxmLmNvbmZpZy5kZWZhdWx0RGF0ZSkge1xuXHRcdFx0c2VsZi5jb25maWcuZGVmYXVsdERhdGUgPSB1RGF0ZShzZWxmLmNvbmZpZy5kZWZhdWx0RGF0ZSk7XG5cdFx0fVxuXG5cdFx0aWYgKHNlbGYuaW5wdXQudmFsdWUgfHwgc2VsZi5jb25maWcuZGVmYXVsdERhdGUpIHtcblx0XHRcdHNlbGYuc2VsZWN0ZWREYXRlT2JqID0gdURhdGUoc2VsZi5jb25maWcuZGVmYXVsdERhdGUgfHwgc2VsZi5pbnB1dC52YWx1ZSk7XG5cdFx0fVxuXG5cdFx0d3JhcCgpO1xuXHRcdGJ1aWxkQ2FsZW5kYXIoKTtcblx0XHRiaW5kKCk7XG5cblx0XHRzZWxmLnVEYXRlID0gdURhdGU7XG5cdFx0c2VsZi5qdW1wVG9EYXRlKCk7XG5cdFx0dXBkYXRlVmFsdWUoKTtcblx0fTtcblxuXHRwYXJzZUNvbmZpZyA9IGZ1bmN0aW9uIHBhcnNlQ29uZmlnKCkge1xuXHRcdHNlbGYuY29uZmlnID0ge307XG5cblx0XHRPYmplY3Qua2V5cyhzZWxmLmRlZmF1bHRDb25maWcpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0aWYgKGluc3RhbmNlQ29uZmlnLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdFx0c2VsZi5jb25maWdba2V5XSA9IGluc3RhbmNlQ29uZmlnW2tleV07XG5cdFx0XHR9IGVsc2UgaWYgKHNlbGYuZWxlbWVudC5kYXRhc2V0ICYmIHNlbGYuZWxlbWVudC5kYXRhc2V0Lmhhc093blByb3BlcnR5KGtleS50b0xvd2VyQ2FzZSgpKSkge1xuXHRcdFx0XHRzZWxmLmNvbmZpZ1trZXldID0gc2VsZi5lbGVtZW50LmRhdGFzZXRba2V5LnRvTG93ZXJDYXNlKCldO1xuXHRcdFx0fSBlbHNlIGlmICghc2VsZi5lbGVtZW50LmRhdGFzZXQgJiYgc2VsZi5lbGVtZW50Lmhhc0F0dHJpYnV0ZShcImRhdGEtXCIgKyBrZXkpKSB7XG5cdFx0XHRcdHNlbGYuY29uZmlnW2tleV0gPSBzZWxmLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1cIiArIGtleSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZWxmLmNvbmZpZ1trZXldID0gZmxhdHBpY2tyLmluaXQucHJvdG90eXBlLmRlZmF1bHRDb25maWdba2V5XSB8fCBzZWxmLmRlZmF1bHRDb25maWdba2V5XTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHR5cGVvZiBzZWxmLmRlZmF1bHRDb25maWdba2V5XSA9PT0gXCJib29sZWFuXCIpIHtcblx0XHRcdFx0c2VsZi5jb25maWdba2V5XSA9IHNlbGYuY29uZmlnW2tleV0gPT09IHRydWUgfHwgc2VsZi5jb25maWdba2V5XSA9PT0gXCJcIiB8fCBzZWxmLmNvbmZpZ1trZXldID09PSBcInRydWVcIjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGtleSA9PT0gXCJlbmFibGVUaW1lXCIgJiYgc2VsZi5jb25maWdba2V5XSkge1xuXHRcdFx0XHRzZWxmLmRlZmF1bHRDb25maWcuZGF0ZUZvcm1hdCA9ICFzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBcIlktbS1kIGg6aSBLXCIgOiBcIlktbS1kIEg6aVwiO1xuXHRcdFx0XHRzZWxmLmRlZmF1bHRDb25maWcuYWx0Rm9ybWF0ID0gIXNlbGYuY29uZmlnLnRpbWVfMjRociA/IFwiRiBqIFksIGg6aSBLXCIgOiBcIkYgaiwgWSBIOmlcIjtcblx0XHRcdH0gZWxzZSBpZiAoa2V5ID09PSBcIm5vQ2FsZW5kYXJcIiAmJiBzZWxmLmNvbmZpZ1trZXldKSB7XG5cdFx0XHRcdHNlbGYuZGVmYXVsdENvbmZpZy5kYXRlRm9ybWF0ID0gXCJoOmkgS1wiO1xuXHRcdFx0XHRzZWxmLmRlZmF1bHRDb25maWcuYWx0Rm9ybWF0ID0gXCJoOmkgS1wiO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdGdldFJhbmRvbUNhbGVuZGFySWRTdHIgPSBmdW5jdGlvbiBnZXRSYW5kb21DYWxlbmRhcklkU3RyKCkge1xuXHRcdHZhciByYW5kTnVtID0gdm9pZCAwLFxuXHRcdCAgICBpZFN0ciA9IHZvaWQgMDtcblx0XHRkbyB7XG5cdFx0XHRyYW5kTnVtID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogTWF0aC5wb3coMTAsIDEwKSk7XG5cdFx0XHRpZFN0ciA9IFwiZmxhdHBpY2tyLVwiICsgcmFuZE51bTtcblx0XHR9IHdoaWxlIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZFN0cikgIT09IG51bGwpO1xuXG5cdFx0cmV0dXJuIGlkU3RyO1xuXHR9O1xuXG5cdHVEYXRlID0gZnVuY3Rpb24gdURhdGUoZGF0ZSwgdGltZWxlc3MpIHtcblx0XHR0aW1lbGVzcyA9IHRpbWVsZXNzIHx8IGZhbHNlO1xuXG5cdFx0aWYgKGRhdGUgPT09IFwidG9kYXlcIikge1xuXHRcdFx0ZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdFx0XHR0aW1lbGVzcyA9IHRydWU7XG5cdFx0fSBlbHNlIGlmICh0eXBlb2YgZGF0ZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0ZGF0ZSA9IGRhdGUudHJpbSgpO1xuXG5cdFx0XHRpZiAoc2VsZi5jb25maWcucGFyc2VEYXRlKSB7XG5cdFx0XHRcdGRhdGUgPSBzZWxmLmNvbmZpZy5wYXJzZURhdGUoZGF0ZSk7XG5cdFx0XHR9IGVsc2UgaWYgKC9eXFxkXFxkXFxkXFxkXFwtXFxkezEsMn1cXC1cXGRcXGQkLy50ZXN0KGRhdGUpKSB7XG5cdFx0XHRcdC8vIHRoaXMgdXRjIGRhdGVzdHJpbmcgZ2V0cyBwYXJzZWQsIGJ1dCBpbmNvcnJlY3RseSBieSBEYXRlLnBhcnNlXG5cdFx0XHRcdGRhdGUgPSBuZXcgRGF0ZShkYXRlLnJlcGxhY2UoLyhcXGQpLShcXGQpL2csIFwiJDEvJDJcIikpO1xuXHRcdFx0fSBlbHNlIGlmIChEYXRlLnBhcnNlKGRhdGUpKSB7XG5cdFx0XHRcdGRhdGUgPSBuZXcgRGF0ZShkYXRlKTtcblx0XHRcdH0gZWxzZSBpZiAoL15cXGRcXGRcXGRcXGRcXC1cXGRcXGRcXC1cXGRcXGQvLnRlc3QoZGF0ZSkpIHtcblx0XHRcdFx0Ly8gZGlzYWJsZSBzcGVjaWFsIHV0YyBkYXRlc3RyaW5nXG5cdFx0XHRcdGRhdGUgPSBuZXcgRGF0ZShkYXRlLnJlcGxhY2UoLyhcXGQpLShcXGQpL2csIFwiJDEvJDJcIikpO1xuXHRcdFx0fSBlbHNlIGlmICgvXihcXGQ/XFxkKTooXFxkXFxkKS8udGVzdChkYXRlKSkge1xuXHRcdFx0XHQvLyB0aW1lLW9ubHkgcGlja2VyXG5cdFx0XHRcdHZhciBtYXRjaGVzID0gZGF0ZS5tYXRjaCgvXihcXGQ/XFxkKTooXFxkXFxkKSg6KFxcZFxcZCkpPy8pLFxuXHRcdFx0XHQgICAgc2Vjb25kcyA9IG1hdGNoZXNbNF0gIT09IHVuZGVmaW5lZCA/IG1hdGNoZXNbNF0gOiAwO1xuXG5cdFx0XHRcdGRhdGUgPSBuZXcgRGF0ZSgpO1xuXHRcdFx0XHRkYXRlLnNldEhvdXJzKG1hdGNoZXNbMV0sIG1hdGNoZXNbMl0sIHNlY29uZHMsIDApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcImZsYXRwaWNrcjogaW52YWxpZCBkYXRlIHN0cmluZyBcIiArIGRhdGUpO1xuXHRcdFx0XHRjb25zb2xlLmluZm8oc2VsZi5lbGVtZW50KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIShkYXRlIGluc3RhbmNlb2YgRGF0ZSkgfHwgIWRhdGUuZ2V0VGltZSgpKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAoc2VsZi5jb25maWcudXRjICYmICFkYXRlLmZwX2lzVVRDKSB7XG5cdFx0XHRkYXRlID0gZGF0ZS5mcF90b1VUQygpO1xuXHRcdH1cblxuXHRcdGlmICh0aW1lbGVzcykge1xuXHRcdFx0ZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGF0ZTtcblx0fTtcblxuXHRlcXVhbERhdGVzID0gZnVuY3Rpb24gZXF1YWxEYXRlcyhkYXRlMSwgZGF0ZTIpIHtcblx0XHRyZXR1cm4gZGF0ZTEuZ2V0RGF0ZSgpID09PSBkYXRlMi5nZXREYXRlKCkgJiYgZGF0ZTEuZ2V0TW9udGgoKSA9PT0gZGF0ZTIuZ2V0TW9udGgoKSAmJiBkYXRlMS5nZXRGdWxsWWVhcigpID09PSBkYXRlMi5nZXRGdWxsWWVhcigpO1xuXHR9O1xuXG5cdHdyYXAgPSBmdW5jdGlvbiB3cmFwKCkge1xuXHRcdHdyYXBwZXJFbGVtZW50ID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13cmFwcGVyXCIpO1xuXG5cdFx0aWYgKHNlbGYuY29uZmlnLmlubGluZSB8fCBzZWxmLmNvbmZpZy5zdGF0aWMpIHtcblx0XHRcdC8vIFdyYXAgaW5wdXQgYW5kIHBsYWNlIGNhbGVuZGFyIHVuZGVybmVhdGhcblx0XHRcdHNlbGYuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwcGVyRWxlbWVudCwgc2VsZi5lbGVtZW50KTtcblx0XHRcdHdyYXBwZXJFbGVtZW50LmFwcGVuZENoaWxkKHNlbGYuZWxlbWVudCk7XG5cblx0XHRcdHdyYXBwZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoc2VsZi5jb25maWcuaW5saW5lID8gXCJpbmxpbmVcIiA6IFwic3RhdGljXCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBJbnNlcnQgYXQgYm90dG9tIG9mIEJPRFkgdGFnIHRvIGRpc3BsYXkgb3V0c2lkZVxuXHRcdFx0Ly8gb2YgcmVsYXRpdmUgcG9zaXRpb25lZCBlbGVtZW50cyB3aXRoIGNzcyBcIm92ZXJmbG93OiBoaWRkZW47XCJcblx0XHRcdC8vIHByb3BlcnR5IHNldC5cblx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQod3JhcHBlckVsZW1lbnQpO1xuXHRcdH1cblxuXHRcdGlmIChzZWxmLmNvbmZpZy5hbHRJbnB1dCkge1xuXHRcdFx0Ly8gcmVwbGljYXRlIHNlbGYuZWxlbWVudFxuXHRcdFx0c2VsZi5hbHRJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoc2VsZi5pbnB1dC5ub2RlTmFtZSwgc2VsZi5jb25maWcuYWx0SW5wdXRDbGFzcyArIFwiIGZsYXRwaWNrci1pbnB1dFwiKTtcblx0XHRcdHNlbGYuYWx0SW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyO1xuXHRcdFx0c2VsZi5hbHRJbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG5cblx0XHRcdHNlbGYuaW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG5cdFx0XHRzZWxmLmlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYuYWx0SW5wdXQsIHNlbGYuaW5wdXQubmV4dFNpYmxpbmcpO1xuXHRcdH1cblx0fTtcblxuXHRnZXREYXlzaW5Nb250aCA9IGZ1bmN0aW9uIGdldERheXNpbk1vbnRoKCkge1xuXHRcdHZhciBtb250aCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHNlbGYuY3VycmVudE1vbnRoIDogYXJndW1lbnRzWzBdO1xuXG5cdFx0dmFyIHlyID0gc2VsZi5jdXJyZW50WWVhcjtcblxuXHRcdGlmIChtb250aCA9PT0gMSAmJiAoeXIgJSA0ID09PSAwICYmIHlyICUgMTAwICE9PSAwIHx8IHlyICUgNDAwID09PSAwKSkge1xuXHRcdFx0cmV0dXJuIDI5O1xuXHRcdH1cblxuXHRcdHJldHVybiBzZWxmLmwxMG4uZGF5c0luTW9udGhbbW9udGhdO1xuXHR9O1xuXG5cdHVwZGF0ZVZhbHVlID0gZnVuY3Rpb24gdXBkYXRlVmFsdWUoZSkge1xuXHRcdGlmIChzZWxmLmNvbmZpZy5ub0NhbGVuZGFyICYmICFzZWxmLnNlbGVjdGVkRGF0ZU9iaikge1xuXHRcdFx0Ly8gcGlja2luZyB0aW1lIG9ubHkgYW5kIG1ldGhvZCB0cmlnZ2VyZWQgZnJvbSBwaWNrZXJcblx0XHRcdHNlbGYuc2VsZWN0ZWREYXRlT2JqID0gbmV3IERhdGUoKTtcblx0XHR9IGVsc2UgaWYgKCFzZWxmLnNlbGVjdGVkRGF0ZU9iaikge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmIChlKSB7XG5cdFx0XHRlLnRhcmdldC5ibHVyKCk7XG5cdFx0fVxuXG5cdFx0dmFyIHRpbWVIYXNDaGFuZ2VkID0gdm9pZCAwO1xuXG5cdFx0aWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUpIHtcblx0XHRcdHZhciBwcmV2aW91c1RpbWVzdGFtcCA9IHNlbGYuc2VsZWN0ZWREYXRlT2JqLmdldFRpbWUoKTtcblxuXHRcdFx0Ly8gdXBkYXRlIHRpbWVcblx0XHRcdHZhciBob3VycyA9IHBhcnNlSW50KHNlbGYuaG91ckVsZW1lbnQudmFsdWUsIDEwKSB8fCAwLFxuXHRcdFx0ICAgIHNlY29uZHMgPSB2b2lkIDA7XG5cblx0XHRcdHZhciBtaW51dGVzID0gKDYwICsgKHBhcnNlSW50KHNlbGYubWludXRlRWxlbWVudC52YWx1ZSwgMTApIHx8IDApKSAlIDYwO1xuXG5cdFx0XHRpZiAoc2VsZi5jb25maWcuZW5hYmxlU2Vjb25kcykge1xuXHRcdFx0XHRzZWNvbmRzID0gKDYwICsgcGFyc2VJbnQoc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFzZWxmLmNvbmZpZy50aW1lXzI0aHIpIHtcblx0XHRcdFx0Ly8gdGhlIHJlYWwgbnVtYmVyIG9mIGhvdXJzIGZvciB0aGUgZGF0ZSBvYmplY3Rcblx0XHRcdFx0aG91cnMgPSBob3VycyAlIDEyICsgMTIgKiAoc2VsZi5hbVBNLmlubmVySFRNTCA9PT0gXCJQTVwiKTtcblx0XHRcdH1cblxuXHRcdFx0c2VsZi5zZWxlY3RlZERhdGVPYmouc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMgPT09IHVuZGVmaW5lZCA/IHNlbGYuc2VsZWN0ZWREYXRlT2JqLmdldFNlY29uZHMoKSA6IHNlY29uZHMpO1xuXG5cdFx0XHRzZWxmLmhvdXJFbGVtZW50LnZhbHVlID0gcGFkKCFzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyAoMTIgKyBob3VycykgJSAxMiArIDEyICogKGhvdXJzICUgMTIgPT09IDApIDogaG91cnMpO1xuXHRcdFx0c2VsZi5taW51dGVFbGVtZW50LnZhbHVlID0gcGFkKG1pbnV0ZXMpO1xuXG5cdFx0XHRpZiAoc2Vjb25kcyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWNvbmRzKTtcblx0XHRcdH1cblxuXHRcdFx0dGltZUhhc0NoYW5nZWQgPSBzZWxmLnNlbGVjdGVkRGF0ZU9iai5nZXRUaW1lKCkgIT09IHByZXZpb3VzVGltZXN0YW1wO1xuXHRcdH1cblxuXHRcdHNlbGYuaW5wdXQudmFsdWUgPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XG5cblx0XHRpZiAoc2VsZi5hbHRJbnB1dCkge1xuXHRcdFx0c2VsZi5hbHRJbnB1dC52YWx1ZSA9IHNlbGYuZm9ybWF0RGF0ZShzZWxmLmNvbmZpZy5hbHRGb3JtYXQpO1xuXHRcdH1cblxuXHRcdGlmIChlICYmICh0aW1lSGFzQ2hhbmdlZCB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpKSkge1xuXHRcdFx0dHJpZ2dlckNoYW5nZSgpO1xuXHRcdH1cblxuXHRcdGlmIChzZWxmLmNvbmZpZy5vblZhbHVlVXBkYXRlKSB7XG5cdFx0XHRzZWxmLmNvbmZpZy5vblZhbHVlVXBkYXRlKHNlbGYuc2VsZWN0ZWREYXRlT2JqLCBzZWxmLmlucHV0LnZhbHVlLCBzZWxmKTtcblx0XHR9XG5cdH07XG5cblx0cGFkID0gZnVuY3Rpb24gcGFkKG51bSkge1xuXHRcdHJldHVybiAoXCIwXCIgKyBudW0pLnNsaWNlKC0yKTtcblx0fTtcblxuXHRzZWxmLmZvcm1hdERhdGUgPSBmdW5jdGlvbiAoZGF0ZUZvcm1hdCkge1xuXHRcdHZhciBmb3JtYXR0ZWREYXRlID0gXCJcIjtcblx0XHR2YXIgZm9ybWF0UGllY2VzID0gZGF0ZUZvcm1hdC5zcGxpdChcIlwiKTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZm9ybWF0UGllY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYyA9IGZvcm1hdFBpZWNlc1tpXTtcblx0XHRcdGlmIChzZWxmLmZvcm1hdHMuaGFzT3duUHJvcGVydHkoYykgJiYgZm9ybWF0UGllY2VzW2kgLSAxXSAhPT0gXCJcXFxcXCIpIHtcblx0XHRcdFx0Zm9ybWF0dGVkRGF0ZSArPSBzZWxmLmZvcm1hdHNbY10oKTtcblx0XHRcdH0gZWxzZSBpZiAoYyAhPT0gXCJcXFxcXCIpIHtcblx0XHRcdFx0Zm9ybWF0dGVkRGF0ZSArPSBjO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmb3JtYXR0ZWREYXRlO1xuXHR9O1xuXG5cdG1vbnRoVG9TdHIgPSBmdW5jdGlvbiBtb250aFRvU3RyKGRhdGUsIHNob3J0aGFuZCkge1xuXHRcdGlmIChzaG9ydGhhbmQgfHwgc2VsZi5jb25maWcuc2hvcnRoYW5kQ3VycmVudE1vbnRoKSB7XG5cdFx0XHRyZXR1cm4gc2VsZi5sMTBuLm1vbnRocy5zaG9ydGhhbmRbZGF0ZV07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNlbGYubDEwbi5tb250aHMubG9uZ2hhbmRbZGF0ZV07XG5cdH07XG5cblx0aXNFbmFibGVkID0gZnVuY3Rpb24gaXNFbmFibGVkKGRhdGVUb0NoZWNrKSB7XG5cdFx0aWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgZGF0ZVRvQ2hlY2sgPCBzZWxmLmNvbmZpZy5taW5EYXRlIHx8IHNlbGYuY29uZmlnLm1heERhdGUgJiYgZGF0ZVRvQ2hlY2sgPiBzZWxmLmNvbmZpZy5tYXhEYXRlKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0ZGF0ZVRvQ2hlY2sgPSB1RGF0ZShkYXRlVG9DaGVjaywgdHJ1ZSk7IC8vIHRpbWVsZXNzXG5cblx0XHR2YXIgYm9vbCA9IHNlbGYuY29uZmlnLmVuYWJsZS5sZW5ndGggPiAwLFxuXHRcdCAgICBhcnJheSA9IGJvb2wgPyBzZWxmLmNvbmZpZy5lbmFibGUgOiBzZWxmLmNvbmZpZy5kaXNhYmxlO1xuXG5cdFx0dmFyIGQgPSB2b2lkIDA7XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRkID0gYXJyYXlbaV07XG5cblx0XHRcdGlmIChkIGluc3RhbmNlb2YgRnVuY3Rpb24gJiYgZChkYXRlVG9DaGVjaykpIHtcblx0XHRcdFx0Ly8gZGlzYWJsZWQgYnkgZnVuY3Rpb25cblx0XHRcdFx0cmV0dXJuIGJvb2w7XG5cdFx0XHR9IGVsc2UgaWYgKCAvLyBkaXNhYmxlZCB3ZWVrZGF5XG5cdFx0XHR0eXBlb2YgZCA9PT0gXCJzdHJpbmdcIiAmJiAvXndrZC8udGVzdChkKSAmJiBkYXRlVG9DaGVjay5nZXREYXkoKSA9PT0gKHBhcnNlSW50KGQuc2xpY2UoLTEpLCAxMCkgKyBzZWxmLmwxMG4uZmlyc3REYXlPZldlZWsgLSAxKSAlIDcpIHtcblx0XHRcdFx0cmV0dXJuIGJvb2w7XG5cdFx0XHR9IGVsc2UgaWYgKChkIGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgZCA9PT0gXCJzdHJpbmdcIiAmJiAhL153a2QvLnRlc3QoZCkpICYmIHVEYXRlKGQsIHRydWUpLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpKSB7XG5cdFx0XHRcdC8vIGRpc2FibGVkIGJ5IGRhdGUgc3RyaW5nXG5cdFx0XHRcdHJldHVybiBib29sO1xuXHRcdFx0fSBlbHNlIGlmICggLy8gZGlzYWJsZWQgYnkgcmFuZ2Vcblx0XHRcdCh0eXBlb2YgZCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGQpKSA9PT0gXCJvYmplY3RcIiAmJiBkLmhhc093blByb3BlcnR5KFwiZnJvbVwiKSAmJiBkYXRlVG9DaGVjayA+PSB1RGF0ZShkLmZyb20pICYmIGRhdGVUb0NoZWNrIDw9IHVEYXRlKGQudG8pKSB7XG5cdFx0XHRcdHJldHVybiBib29sO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiAhYm9vbDtcblx0fTtcblxuXHR5ZWFyU2Nyb2xsID0gZnVuY3Rpb24geWVhclNjcm9sbChldmVudCkge1xuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHR2YXIgZGVsdGEgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgZXZlbnQud2hlZWxEZWx0YSB8fCAtZXZlbnQuZGVsdGFZKSk7XG5cdFx0c2VsZi5jdXJyZW50WWVhciA9IGV2ZW50LnRhcmdldC52YWx1ZSA9IHBhcnNlSW50KGV2ZW50LnRhcmdldC52YWx1ZSwgMTApICsgZGVsdGE7XG5cdFx0c2VsZi5yZWRyYXcoKTtcblx0fTtcblxuXHR0aW1lV3JhcHBlciA9IGZ1bmN0aW9uIHRpbWVXcmFwcGVyKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHR2YXIgbWluID0gcGFyc2VJbnQoZS50YXJnZXQubWluLCAxMCksXG5cdFx0ICAgIG1heCA9IHBhcnNlSW50KGUudGFyZ2V0Lm1heCwgMTApLFxuXHRcdCAgICBzdGVwID0gcGFyc2VJbnQoZS50YXJnZXQuc3RlcCwgMTApLFxuXHRcdCAgICB2YWx1ZSA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlLCAxMCk7XG5cblx0XHR2YXIgbmV3VmFsdWUgPSB2YWx1ZTtcblxuXHRcdGlmIChlLnR5cGUgPT09IFwid2hlZWxcIikge1xuXHRcdFx0bmV3VmFsdWUgPSB2YWx1ZSArIHN0ZXAgKiBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgZS53aGVlbERlbHRhIHx8IC1lLmRlbHRhWSkpO1xuXHRcdH1cblxuXHRcdGlmIChuZXdWYWx1ZSA8PSBtaW4pIHtcblx0XHRcdG5ld1ZhbHVlID0gbWF4IC0gc3RlcDtcblx0XHR9IGVsc2UgaWYgKG5ld1ZhbHVlID49IG1heCkge1xuXHRcdFx0bmV3VmFsdWUgPSBtaW4gKyBzdGVwO1xuXHRcdH1cblxuXHRcdGUudGFyZ2V0LnZhbHVlID0gcGFkKG5ld1ZhbHVlKTtcblx0fTtcblxuXHR1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoID0gZnVuY3Rpb24gdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpIHtcblx0XHRjdXJyZW50TW9udGhFbGVtZW50LnRleHRDb250ZW50ID0gbW9udGhUb1N0cihzZWxmLmN1cnJlbnRNb250aCkgKyBcIiBcIjtcblx0XHRjdXJyZW50WWVhckVsZW1lbnQudmFsdWUgPSBzZWxmLmN1cnJlbnRZZWFyO1xuXHR9O1xuXG5cdGhhbmRsZVllYXJDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVZZWFyQ2hhbmdlKCkge1xuXHRcdGlmIChzZWxmLmN1cnJlbnRNb250aCA8IDAgfHwgc2VsZi5jdXJyZW50TW9udGggPiAxMSkge1xuXHRcdFx0c2VsZi5jdXJyZW50WWVhciArPSBzZWxmLmN1cnJlbnRNb250aCAlIDExO1xuXHRcdFx0c2VsZi5jdXJyZW50TW9udGggPSAoc2VsZi5jdXJyZW50TW9udGggKyAxMikgJSAxMjtcblx0XHR9XG5cdH07XG5cblx0ZG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIGRvY3VtZW50Q2xpY2soZSkge1xuXHRcdHZhciBpc0NhbGVuZGFyRWxlbWVudCA9IHdyYXBwZXJFbGVtZW50LmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCB8fCBlLnRhcmdldCksXG5cdFx0ICAgIGlzSW5wdXQgPSBzZWxmLmVsZW1lbnQuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0IHx8IGUudGFyZ2V0KSB8fCBlLnJlbGF0ZWRUYXJnZXQgfHwgZS50YXJnZXQgPT09IHNlbGYuYWx0SW5wdXQ7XG5cblx0XHRpZiAoc2VsZi5pc09wZW4gJiYgIWlzQ2FsZW5kYXJFbGVtZW50ICYmICFpc0lucHV0KSB7XG5cdFx0XHRzZWxmLmNsb3NlKCk7XG5cdFx0fVxuXHR9O1xuXG5cdGNoYW5nZU1vbnRoID0gZnVuY3Rpb24gY2hhbmdlTW9udGgob2Zmc2V0KSB7XG5cdFx0c2VsZi5jdXJyZW50TW9udGggKz0gb2Zmc2V0O1xuXG5cdFx0aGFuZGxlWWVhckNoYW5nZSgpO1xuXHRcdHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcblx0XHRidWlsZERheXMoKTtcblx0XHQoc2VsZi5jb25maWcubm9DYWxlbmRhciA/IHRpbWVDb250YWluZXIgOiBjYWxlbmRhcikuZm9jdXMoKTtcblx0fTtcblxuXHRzZWxlY3REYXRlID0gZnVuY3Rpb24gc2VsZWN0RGF0ZShlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHRpZiAoc2VsZi5jb25maWcuYWxsb3dJbnB1dCAmJiBlLnRhcmdldCA9PT0gKHNlbGYuYWx0SW5wdXQgfHwgc2VsZi5pbnB1dCkgJiYgZS53aGljaCA9PT0gMTMpIHtcblx0XHRcdHNlbGYuc2V0RGF0ZSgoc2VsZi5hbHRJbnB1dCB8fCBzZWxmLmlucHV0KS52YWx1ZSk7XG5cdFx0XHRzZWxmLnJlZHJhdygpO1xuXHRcdH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZmxhdHBpY2tyLWRheVwiKSkge1xuXHRcdFx0dmFyIGlzUHJldk1vbnRoRGF5ID0gZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicHJldk1vbnRoRGF5XCIpLFxuXHRcdFx0ICAgIGlzTmV4dE1vbnRoRGF5ID0gZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibmV4dE1vbnRoRGF5XCIpLFxuXHRcdFx0ICAgIG1vbnRoTnVtID0gc2VsZi5jdXJyZW50TW9udGggLSBpc1ByZXZNb250aERheSArIGlzTmV4dE1vbnRoRGF5O1xuXG5cdFx0XHRpZiAoaXNQcmV2TW9udGhEYXkgfHwgaXNOZXh0TW9udGhEYXkpIHtcblx0XHRcdFx0Y2hhbmdlTW9udGgoK2lzTmV4dE1vbnRoRGF5IC0gaXNQcmV2TW9udGhEYXkpO1xuXHRcdFx0fVxuXG5cdFx0XHRzZWxmLnNlbGVjdGVkRGF0ZU9iaiA9IG5ldyBEYXRlKHNlbGYuY3VycmVudFllYXIsIG1vbnRoTnVtLCBlLnRhcmdldC5pbm5lckhUTUwpO1xuXG5cdFx0XHR1cGRhdGVWYWx1ZShlKTtcblx0XHRcdGJ1aWxkRGF5cygpO1xuXG5cdFx0XHRpZiAoIXNlbGYuY29uZmlnLmVuYWJsZVRpbWUpIHtcblx0XHRcdFx0c2VsZi5jbG9zZSgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRidWlsZENhbGVuZGFyID0gZnVuY3Rpb24gYnVpbGRDYWxlbmRhcigpIHtcblx0XHRjYWxlbmRhckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItY2FsZW5kYXJcIik7XG5cdFx0Y2FsZW5kYXJDb250YWluZXIuaWQgPSBnZXRSYW5kb21DYWxlbmRhcklkU3RyKCk7XG5cblx0XHRjYWxlbmRhciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItZGF5c1wiKTtcblx0XHRjYWxlbmRhci50YWJJbmRleCA9IC0xO1xuXG5cdFx0aWYgKCFzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKSB7XG5cdFx0XHRidWlsZE1vbnRoTmF2aWdhdGlvbigpO1xuXHRcdFx0YnVpbGRXZWVrZGF5cygpO1xuXG5cdFx0XHRpZiAoc2VsZi5jb25maWcud2Vla051bWJlcnMpIHtcblx0XHRcdFx0YnVpbGRXZWVrcygpO1xuXHRcdFx0fVxuXG5cdFx0XHRidWlsZERheXMoKTtcblxuXHRcdFx0Y2FsZW5kYXJDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FsZW5kYXIpO1xuXHRcdH1cblxuXHRcdHdyYXBwZXJFbGVtZW50LmFwcGVuZENoaWxkKGNhbGVuZGFyQ29udGFpbmVyKTtcblxuXHRcdGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XG5cdFx0XHRidWlsZFRpbWUoKTtcblx0XHR9XG5cdH07XG5cblx0YnVpbGRNb250aE5hdmlnYXRpb24gPSBmdW5jdGlvbiBidWlsZE1vbnRoTmF2aWdhdGlvbigpIHtcblx0XHRtb250aHNOYXYgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLW1vbnRoXCIpO1xuXG5cdFx0cHJldk1vbnRoTmF2ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItcHJldi1tb250aFwiKTtcblx0XHRwcmV2TW9udGhOYXYuaW5uZXJIVE1MID0gc2VsZi5jb25maWcucHJldkFycm93O1xuXG5cdFx0Y3VycmVudE1vbnRoRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiY3VyX21vbnRoXCIpO1xuXG5cdFx0Y3VycmVudFllYXJFbGVtZW50ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIFwiY3VyX3llYXJcIik7XG5cdFx0Y3VycmVudFllYXJFbGVtZW50LnR5cGUgPSBcIm51bWJlclwiO1xuXHRcdGN1cnJlbnRZZWFyRWxlbWVudC50aXRsZSA9IHNlbGYubDEwbi5zY3JvbGxUaXRsZTtcblxuXHRcdG5leHRNb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLW5leHQtbW9udGhcIik7XG5cdFx0bmV4dE1vbnRoTmF2LmlubmVySFRNTCA9IHNlbGYuY29uZmlnLm5leHRBcnJvdztcblxuXHRcdG5hdmlnYXRpb25DdXJyZW50TW9udGggPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1jdXJyZW50LW1vbnRoXCIpO1xuXHRcdG5hdmlnYXRpb25DdXJyZW50TW9udGguYXBwZW5kQ2hpbGQoY3VycmVudE1vbnRoRWxlbWVudCk7XG5cdFx0bmF2aWdhdGlvbkN1cnJlbnRNb250aC5hcHBlbmRDaGlsZChjdXJyZW50WWVhckVsZW1lbnQpO1xuXG5cdFx0bW9udGhzTmF2LmFwcGVuZENoaWxkKHByZXZNb250aE5hdik7XG5cdFx0bW9udGhzTmF2LmFwcGVuZENoaWxkKG5hdmlnYXRpb25DdXJyZW50TW9udGgpO1xuXHRcdG1vbnRoc05hdi5hcHBlbmRDaGlsZChuZXh0TW9udGhOYXYpO1xuXG5cdFx0Y2FsZW5kYXJDb250YWluZXIuYXBwZW5kQ2hpbGQobW9udGhzTmF2KTtcblx0XHR1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG5cdH07XG5cblx0YnVpbGRXZWVrZGF5cyA9IGZ1bmN0aW9uIGJ1aWxkV2Vla2RheXMoKSB7XG5cdFx0d2Vla2RheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla2RheXNcIik7XG5cdFx0dmFyIGZpcnN0RGF5T2ZXZWVrID0gc2VsZi5sMTBuLmZpcnN0RGF5T2ZXZWVrO1xuXG5cdFx0dmFyIHdlZWtkYXlzID0gc2VsZi5sMTBuLndlZWtkYXlzLnNob3J0aGFuZC5zbGljZSgpO1xuXG5cdFx0aWYgKGZpcnN0RGF5T2ZXZWVrID4gMCAmJiBmaXJzdERheU9mV2VlayA8IHdlZWtkYXlzLmxlbmd0aCkge1xuXHRcdFx0d2Vla2RheXMgPSBbXS5jb25jYXQod2Vla2RheXMuc3BsaWNlKGZpcnN0RGF5T2ZXZWVrLCB3ZWVrZGF5cy5sZW5ndGgpLCB3ZWVrZGF5cy5zcGxpY2UoMCwgZmlyc3REYXlPZldlZWspKTtcblx0XHR9XG5cblx0XHRpZiAoc2VsZi5jb25maWcud2Vla051bWJlcnMpIHtcblx0XHRcdHdlZWtkYXlDb250YWluZXIuaW5uZXJIVE1MID0gXCI8c3Bhbj5cIiArIHNlbGYubDEwbi53ZWVrQWJicmV2aWF0aW9uICsgXCI8L3NwYW4+XCI7XG5cdFx0fVxuXG5cdFx0d2Vla2RheUNvbnRhaW5lci5pbm5lckhUTUwgKz0gXCI8c3Bhbj5cIiArIHdlZWtkYXlzLmpvaW4oXCI8L3NwYW4+PHNwYW4+XCIpICsgXCI8L3NwYW4+XCI7XG5cblx0XHRjYWxlbmRhckNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWVrZGF5Q29udGFpbmVyKTtcblx0fTtcblxuXHRidWlsZFdlZWtzID0gZnVuY3Rpb24gYnVpbGRXZWVrcygpIHtcblx0XHRjYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaGFzV2Vla3NcIik7XG5cblx0XHR3ZWVrTnVtYmVycyA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla3NcIik7XG5cdFx0Y2FsZW5kYXJDb250YWluZXIuYXBwZW5kQ2hpbGQod2Vla051bWJlcnMpO1xuXHR9O1xuXG5cdGJ1aWxkRGF5cyA9IGZ1bmN0aW9uIGJ1aWxkRGF5cygpIHtcblx0XHR2YXIgZmlyc3RPZk1vbnRoID0gKG5ldyBEYXRlKHNlbGYuY3VycmVudFllYXIsIHNlbGYuY3VycmVudE1vbnRoLCAxKS5nZXREYXkoKSAtIHNlbGYubDEwbi5maXJzdERheU9mV2VlayArIDcpICUgNyxcblx0XHQgICAgZGF5c0luTW9udGggPSBnZXREYXlzaW5Nb250aCgpLFxuXHRcdCAgICBwcmV2TW9udGhEYXlzID0gZ2V0RGF5c2luTW9udGgoKHNlbGYuY3VycmVudE1vbnRoIC0gMSArIDEyKSAlIDEyKSxcblx0XHQgICAgZGF5cyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuXHRcdHZhciBkYXlOdW1iZXIgPSBwcmV2TW9udGhEYXlzICsgMSAtIGZpcnN0T2ZNb250aCxcblx0XHQgICAgY3VycmVudERhdGUgPSB2b2lkIDAsXG5cdFx0ICAgIGRhdGVJc0Rpc2FibGVkID0gdm9pZCAwO1xuXG5cdFx0aWYgKHNlbGYuY29uZmlnLndlZWtOdW1iZXJzKSB7XG5cdFx0XHR3ZWVrTnVtYmVycy5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdH1cblxuXHRcdGNhbGVuZGFyLmlubmVySFRNTCA9IFwiXCI7XG5cblx0XHRzZWxmLmNvbmZpZy5taW5EYXRlID0gdURhdGUoc2VsZi5jb25maWcubWluRGF0ZSwgdHJ1ZSk7XG5cdFx0c2VsZi5jb25maWcubWF4RGF0ZSA9IHVEYXRlKHNlbGYuY29uZmlnLm1heERhdGUsIHRydWUpO1xuXG5cdFx0Ly8gcHJlcGVuZCBkYXlzIGZyb20gdGhlIGVuZGluZyBvZiBwcmV2aW91cyBtb250aFxuXHRcdGZvciAoOyBkYXlOdW1iZXIgPD0gcHJldk1vbnRoRGF5czsgZGF5TnVtYmVyKyspIHtcblx0XHRcdHZhciBjdXJEYXRlID0gbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGggLSAxLCBkYXlOdW1iZXIsIDAsIDAsIDAsIDAsIDApLFxuXHRcdFx0ICAgIGRhdGVJc0VuYWJsZWQgPSBpc0VuYWJsZWQoY3VyRGF0ZSksXG5cdFx0XHQgICAgZGF5RWxlbSA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIGRhdGVJc0VuYWJsZWQgPyBcImZsYXRwaWNrci1kYXkgcHJldk1vbnRoRGF5XCIgOiBcImRpc2FibGVkXCIsIGRheU51bWJlcik7XG5cblx0XHRcdGlmIChkYXRlSXNFbmFibGVkKSB7XG5cdFx0XHRcdGRheUVsZW0udGFiSW5kZXggPSAwO1xuXHRcdFx0fVxuXG5cdFx0XHRkYXlzLmFwcGVuZENoaWxkKGRheUVsZW0pO1xuXHRcdH1cblxuXHRcdC8vIFN0YXJ0IGF0IDEgc2luY2UgdGhlcmUgaXMgbm8gMHRoIGRheVxuXHRcdGZvciAoZGF5TnVtYmVyID0gMTsgZGF5TnVtYmVyIDw9IGRheXNJbk1vbnRoOyBkYXlOdW1iZXIrKykge1xuXHRcdFx0Y3VycmVudERhdGUgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgZGF5TnVtYmVyLCAwLCAwLCAwLCAwLCAwKTtcblxuXHRcdFx0aWYgKHNlbGYuY29uZmlnLndlZWtOdW1iZXJzICYmIGRheU51bWJlciAlIDcgPT09IDEpIHtcblx0XHRcdFx0d2Vla051bWJlcnMuYXBwZW5kQ2hpbGQoY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJkaXNhYmxlZCBmbGF0cGlja3ItZGF5XCIsIGN1cnJlbnREYXRlLmZwX2dldFdlZWsoKSkpO1xuXHRcdFx0fVxuXG5cdFx0XHRkYXRlSXNEaXNhYmxlZCA9ICFpc0VuYWJsZWQoY3VycmVudERhdGUpO1xuXG5cdFx0XHR2YXIgZGF5RWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIGRhdGVJc0Rpc2FibGVkID8gXCJkaXNhYmxlZFwiIDogXCJmbGF0cGlja3ItZGF5XCIsIGRheU51bWJlcik7XG5cblx0XHRcdGlmICghZGF0ZUlzRGlzYWJsZWQpIHtcblx0XHRcdFx0ZGF5RWxlbWVudC50YWJJbmRleCA9IDA7XG5cblx0XHRcdFx0aWYgKGVxdWFsRGF0ZXMoY3VycmVudERhdGUsIG5vdykpIHtcblx0XHRcdFx0XHRkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0b2RheVwiKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChzZWxmLnNlbGVjdGVkRGF0ZU9iaiAmJiBlcXVhbERhdGVzKGN1cnJlbnREYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZU9iaikpIHtcblx0XHRcdFx0XHRkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRkYXlzLmFwcGVuZENoaWxkKGRheUVsZW1lbnQpO1xuXHRcdH1cblxuXHRcdC8vIGFwcGVuZCBkYXlzIGZyb20gdGhlIG5leHQgbW9udGhcblx0XHRmb3IgKHZhciBkYXlOdW0gPSBkYXlzSW5Nb250aCArIDE7IGRheU51bSA8PSA0MiAtIGZpcnN0T2ZNb250aDsgZGF5TnVtKyspIHtcblx0XHRcdHZhciBfY3VyRGF0ZSA9IG5ldyBEYXRlKHNlbGYuY3VycmVudFllYXIsIHNlbGYuY3VycmVudE1vbnRoICsgMSwgZGF5TnVtICUgZGF5c0luTW9udGgsIDAsIDAsIDAsIDAsIDApLFxuXHRcdFx0ICAgIF9kYXRlSXNFbmFibGVkID0gaXNFbmFibGVkKF9jdXJEYXRlKSxcblx0XHRcdCAgICBfZGF5RWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIF9kYXRlSXNFbmFibGVkID8gXCJuZXh0TW9udGhEYXkgZmxhdHBpY2tyLWRheVwiIDogXCJkaXNhYmxlZFwiLCBkYXlOdW0gJSBkYXlzSW5Nb250aCk7XG5cblx0XHRcdGlmIChzZWxmLmNvbmZpZy53ZWVrTnVtYmVycyAmJiBkYXlOdW0gJSA3ID09PSAxKSB7XG5cdFx0XHRcdHdlZWtOdW1iZXJzLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZGlzYWJsZWRcIiwgX2N1ckRhdGUuZnBfZ2V0V2VlaygpKSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChfZGF0ZUlzRW5hYmxlZCkge1xuXHRcdFx0XHRfZGF5RWxlbWVudC50YWJJbmRleCA9IDA7XG5cdFx0XHR9XG5cblx0XHRcdGRheXMuYXBwZW5kQ2hpbGQoX2RheUVsZW1lbnQpO1xuXHRcdH1cblxuXHRcdGNhbGVuZGFyLmFwcGVuZENoaWxkKGRheXMpO1xuXHR9O1xuXG5cdGJ1aWxkVGltZSA9IGZ1bmN0aW9uIGJ1aWxkVGltZSgpIHtcblx0XHR0aW1lQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci10aW1lXCIpO1xuXHRcdHRpbWVDb250YWluZXIudGFiSW5kZXggPSAtMTtcblx0XHR2YXIgc2VwYXJhdG9yID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItdGltZS1zZXBhcmF0b3JcIiwgXCI6XCIpO1xuXG5cdFx0c2VsZi5ob3VyRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBcImZsYXRwaWNrci1ob3VyXCIpO1xuXHRcdHNlbGYubWludXRlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBcImZsYXRwaWNrci1taW51dGVcIik7XG5cblx0XHRzZWxmLmhvdXJFbGVtZW50LnRhYkluZGV4ID0gc2VsZi5taW51dGVFbGVtZW50LnRhYkluZGV4ID0gMDtcblx0XHRzZWxmLmhvdXJFbGVtZW50LnR5cGUgPSBzZWxmLm1pbnV0ZUVsZW1lbnQudHlwZSA9IFwibnVtYmVyXCI7XG5cblx0XHRzZWxmLmhvdXJFbGVtZW50LnZhbHVlID0gc2VsZi5zZWxlY3RlZERhdGVPYmogPyBwYWQoc2VsZi5zZWxlY3RlZERhdGVPYmouZ2V0SG91cnMoKSkgOiAxMjtcblxuXHRcdHNlbGYubWludXRlRWxlbWVudC52YWx1ZSA9IHNlbGYuc2VsZWN0ZWREYXRlT2JqID8gcGFkKHNlbGYuc2VsZWN0ZWREYXRlT2JqLmdldE1pbnV0ZXMoKSkgOiBcIjAwXCI7XG5cblx0XHRzZWxmLmhvdXJFbGVtZW50LnN0ZXAgPSBzZWxmLmNvbmZpZy5ob3VySW5jcmVtZW50O1xuXHRcdHNlbGYubWludXRlRWxlbWVudC5zdGVwID0gc2VsZi5jb25maWcubWludXRlSW5jcmVtZW50O1xuXG5cdFx0c2VsZi5ob3VyRWxlbWVudC5taW4gPSAtc2VsZi5jb25maWcudGltZV8yNGhyO1xuXHRcdHNlbGYuaG91ckVsZW1lbnQubWF4ID0gc2VsZi5jb25maWcudGltZV8yNGhyID8gMjQgOiAxMztcblxuXHRcdHNlbGYubWludXRlRWxlbWVudC5taW4gPSAtc2VsZi5taW51dGVFbGVtZW50LnN0ZXA7XG5cdFx0c2VsZi5taW51dGVFbGVtZW50Lm1heCA9IDYwO1xuXG5cdFx0c2VsZi5ob3VyRWxlbWVudC50aXRsZSA9IHNlbGYubWludXRlRWxlbWVudC50aXRsZSA9IHNlbGYubDEwbi5zY3JvbGxUaXRsZTtcblxuXHRcdHRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5ob3VyRWxlbWVudCk7XG5cdFx0dGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZXBhcmF0b3IpO1xuXHRcdHRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5taW51dGVFbGVtZW50KTtcblxuXHRcdGlmIChzZWxmLmNvbmZpZy5lbmFibGVTZWNvbmRzKSB7XG5cdFx0XHR0aW1lQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXMtc2Vjb25kc1wiKTtcblxuXHRcdFx0c2VsZi5zZWNvbmRFbGVtZW50ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIFwiZmxhdHBpY2tyLXNlY29uZFwiKTtcblx0XHRcdHNlbGYuc2Vjb25kRWxlbWVudC50eXBlID0gXCJudW1iZXJcIjtcblx0XHRcdHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHNlbGYuc2VsZWN0ZWREYXRlT2JqID8gcGFkKHNlbGYuc2VsZWN0ZWREYXRlT2JqLmdldFNlY29uZHMoKSkgOiBcIjAwXCI7XG5cblx0XHRcdHNlbGYuc2Vjb25kRWxlbWVudC5zdGVwID0gc2VsZi5taW51dGVFbGVtZW50LnN0ZXA7XG5cdFx0XHRzZWxmLnNlY29uZEVsZW1lbnQubWluID0gc2VsZi5taW51dGVFbGVtZW50Lm1pbjtcblx0XHRcdHNlbGYuc2Vjb25kRWxlbWVudC5tYXggPSBzZWxmLm1pbnV0ZUVsZW1lbnQubWF4O1xuXG5cdFx0XHR0aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXRpbWUtc2VwYXJhdG9yXCIsIFwiOlwiKSk7XG5cdFx0XHR0aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuc2Vjb25kRWxlbWVudCk7XG5cdFx0fVxuXG5cdFx0aWYgKCFzZWxmLmNvbmZpZy50aW1lXzI0aHIpIHtcblx0XHRcdC8vIGFkZCBzZWxmLmFtUE0gaWYgYXBwcm9wcmlhdGVcblx0XHRcdHNlbGYuYW1QTSA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLWFtLXBtXCIsIFtcIkFNXCIsIFwiUE1cIl1bc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA+IDExIHwgMF0pO1xuXHRcdFx0c2VsZi5hbVBNLnRpdGxlID0gc2VsZi5sMTBuLnRvZ2dsZVRpdGxlO1xuXHRcdFx0c2VsZi5hbVBNLnRhYkluZGV4ID0gMDtcblx0XHRcdHRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5hbVBNKTtcblx0XHR9XG5cblx0XHRjYWxlbmRhckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aW1lQ29udGFpbmVyKTtcblx0fTtcblxuXHRiaW5kID0gZnVuY3Rpb24gYmluZCgpIHtcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbktleURvd24pO1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIG9uUmVzaXplKTtcblxuXHRcdGlmIChzZWxmLmNvbmZpZy5jbGlja09wZW5zKSB7XG5cdFx0XHQoc2VsZi5hbHRJbnB1dCB8fCBzZWxmLmlucHV0KS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsZi5vcGVuKTtcblx0XHRcdChzZWxmLmFsdElucHV0IHx8IHNlbGYuaW5wdXQpLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBzZWxmLm9wZW4pO1xuXHRcdH1cblxuXHRcdGlmIChzZWxmLmNvbmZpZy53cmFwICYmIHNlbGYuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtb3Blbl1cIikpIHtcblx0XHRcdHNlbGYuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtb3Blbl1cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNlbGYub3Blbik7XG5cdFx0fVxuXG5cdFx0aWYgKHNlbGYuY29uZmlnLndyYXAgJiYgc2VsZi5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1jbG9zZV1cIikpIHtcblx0XHRcdHNlbGYuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtY2xvc2VdXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzZWxmLmNsb3NlKTtcblx0XHR9XG5cblx0XHRpZiAoc2VsZi5jb25maWcud3JhcCAmJiBzZWxmLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLXRvZ2dsZV1cIikpIHtcblx0XHRcdHNlbGYuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtdG9nZ2xlXVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsZi50b2dnbGUpO1xuXHRcdH1cblxuXHRcdGlmIChzZWxmLmNvbmZpZy53cmFwICYmIHNlbGYuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtY2xlYXJdXCIpKSB7XG5cdFx0XHRzZWxmLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLWNsZWFyXVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsZi5jbGVhcik7XG5cdFx0fVxuXG5cdFx0aWYgKCFzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKSB7XG5cdFx0XHRwcmV2TW9udGhOYXYuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Y2hhbmdlTW9udGgoLTEpO1xuXHRcdFx0fSk7XG5cblx0XHRcdG5leHRNb250aE5hdi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRjaGFuZ2VNb250aCgxKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRjdXJyZW50WWVhckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIHllYXJTY3JvbGwpO1xuXHRcdFx0Y3VycmVudFllYXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBjdXJyZW50WWVhckVsZW1lbnQuc2VsZWN0KTtcblxuXHRcdFx0Y3VycmVudFllYXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdFx0c2VsZi5jdXJyZW50WWVhciA9IHBhcnNlSW50KGV2ZW50LnRhcmdldC52YWx1ZSwgMTApO1xuXHRcdFx0XHRzZWxmLnJlZHJhdygpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGNhbGVuZGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzZWxlY3REYXRlKTtcblx0XHR9XG5cblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZG9jdW1lbnRDbGljaywgdHJ1ZSk7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIGRvY3VtZW50Q2xpY2ssIHRydWUpO1xuXG5cdFx0aWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUpIHtcblx0XHRcdHNlbGYuaG91ckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIHRpbWVXcmFwcGVyKTtcblx0XHRcdHNlbGYubWludXRlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgdGltZVdyYXBwZXIpO1xuXG5cdFx0XHRzZWxmLmhvdXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aW1lV3JhcHBlcik7XG5cdFx0XHRzZWxmLm1pbnV0ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRpbWVXcmFwcGVyKTtcblxuXHRcdFx0c2VsZi5ob3VyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgdXBkYXRlVmFsdWUpO1xuXHRcdFx0c2VsZi5taW51dGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCB1cGRhdGVWYWx1ZSk7XG5cblx0XHRcdHNlbGYuaG91ckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB1cGRhdGVWYWx1ZSk7XG5cdFx0XHRzZWxmLm1pbnV0ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB1cGRhdGVWYWx1ZSk7XG5cblx0XHRcdHNlbGYuaG91ckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHNlbGYuaG91ckVsZW1lbnQuc2VsZWN0KTtcblx0XHRcdHNlbGYubWludXRlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgc2VsZi5taW51dGVFbGVtZW50LnNlbGVjdCk7XG5cblx0XHRcdGlmIChzZWxmLmNvbmZpZy5lbmFibGVTZWNvbmRzKSB7XG5cdFx0XHRcdHNlbGYuc2Vjb25kRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgdGltZVdyYXBwZXIpO1xuXHRcdFx0XHRzZWxmLnNlY29uZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRpbWVXcmFwcGVyKTtcblx0XHRcdFx0c2VsZi5zZWNvbmRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCB1cGRhdGVWYWx1ZSk7XG5cdFx0XHRcdHNlbGYuc2Vjb25kRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHVwZGF0ZVZhbHVlKTtcblx0XHRcdFx0c2VsZi5zZWNvbmRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBzZWxmLnNlY29uZEVsZW1lbnQuc2VsZWN0KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFzZWxmLmNvbmZpZy50aW1lXzI0aHIpIHtcblx0XHRcdFx0c2VsZi5hbVBNLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhbVBNVG9nZ2xlKTtcblxuXHRcdFx0XHRzZWxmLmFtUE0uYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIGFtUE1Ub2dnbGUpO1xuXHRcdFx0XHRzZWxmLmFtUE0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIHVwZGF0ZVZhbHVlKTtcblxuXHRcdFx0XHRzZWxmLmFtUE0uYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRpZiAoZS53aGljaCA9PT0gMzggfHwgZS53aGljaCA9PT0gNDApIHtcblx0XHRcdFx0XHRcdGFtUE1Ub2dnbGUoZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnQpIHtcblx0XHRcdGNsaWNrRXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50XCIpO1xuXHRcdFx0Ly8gd2l0aG91dCBhbGwgdGhlc2UgYXJncyBtcyBlZGdlIHNwZXJncyBvdXRcblx0XHRcdGNsaWNrRXZ0LmluaXRNb3VzZUV2ZW50KFwiY2xpY2tcIiwgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAwLCAwLCAwLCAwLCAwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMCwgbnVsbCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNsaWNrRXZ0ID0gbmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiLCB7XG5cdFx0XHRcdHZpZXc6IHdpbmRvdyxcblx0XHRcdFx0YnViYmxlczogdHJ1ZSxcblx0XHRcdFx0Y2FuY2VsYWJsZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdHNlbGYub3BlbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoc2VsZi5pc09wZW4gfHwgKHNlbGYuYWx0SW5wdXQgfHwgc2VsZi5pbnB1dCkuZGlzYWJsZWQgfHwgc2VsZi5jb25maWcuaW5saW5lKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fSBlbHNlIGlmICghc2VsZi5jb25maWcuc3RhdGljKSB7XG5cdFx0XHRzZWxmLnBvc2l0aW9uQ2FsZW5kYXIoKTtcblx0XHR9XG5cblx0XHRzZWxmLmlzT3BlbiA9IHRydWU7XG5cblx0XHR3cmFwcGVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcblxuXHRcdGlmICghc2VsZi5jb25maWcuYWxsb3dJbnB1dCkge1xuXHRcdFx0KHNlbGYuYWx0SW5wdXQgfHwgc2VsZi5pbnB1dCkuYmx1cigpO1xuXHRcdFx0KHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgPyB0aW1lQ29udGFpbmVyIDogY2FsZW5kYXIpLmZvY3VzKCk7XG5cdFx0fVxuXG5cdFx0KHNlbGYuYWx0SW5wdXQgfHwgc2VsZi5pbnB1dCkuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcblxuXHRcdGlmIChzZWxmLmNvbmZpZy5vbk9wZW4pIHtcblx0XHRcdHNlbGYuY29uZmlnLm9uT3BlbihzZWxmLnNlbGVjdGVkRGF0ZU9iaiwgc2VsZi5pbnB1dC52YWx1ZSwgc2VsZik7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIEZvciBjYWxlbmRhcnMgaW5zZXJ0ZWQgaW4gQk9EWSAoYXMgb3Bwb3NlZCB0byBpbmxpbmUgd3JhcHBlcilcblx0Ly8gaXRcInMgbmVjZXNzYXJ5IHRvIHByb3Blcmx5IGNhbGN1bGF0ZSB0b3AvbGVmdCBwb3NpdGlvbi5cblx0c2VsZi5wb3NpdGlvbkNhbGVuZGFyID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBjYWxlbmRhckhlaWdodCA9IGNhbGVuZGFyQ29udGFpbmVyLm9mZnNldEhlaWdodCxcblx0XHQgICAgaW5wdXQgPSBzZWxmLmFsdElucHV0IHx8IHNlbGYuaW5wdXQsXG5cdFx0ICAgIGlucHV0Qm91bmRzID0gaW5wdXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG5cdFx0ICAgIGRpc3RhbmNlRnJvbUJvdHRvbSA9IHdpbmRvdy5pbm5lckhlaWdodCAtIGlucHV0Qm91bmRzLmJvdHRvbSArIGlucHV0Lm9mZnNldEhlaWdodDtcblxuXHRcdHZhciB0b3AgPSB2b2lkIDAsXG5cdFx0ICAgIGxlZnQgPSB3aW5kb3cucGFnZVhPZmZzZXQgKyBpbnB1dEJvdW5kcy5sZWZ0O1xuXG5cdFx0aWYgKGRpc3RhbmNlRnJvbUJvdHRvbSA8IGNhbGVuZGFySGVpZ2h0KSB7XG5cdFx0XHR0b3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgLSBjYWxlbmRhckhlaWdodCArIGlucHV0Qm91bmRzLnRvcCAtIDI7XG5cdFx0XHRjYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiYXJyb3dUb3BcIik7XG5cdFx0XHRjYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiYXJyb3dCb3R0b21cIik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCArIGlucHV0Lm9mZnNldEhlaWdodCArIGlucHV0Qm91bmRzLnRvcCArIDI7XG5cdFx0XHRjYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiYXJyb3dCb3R0b21cIik7XG5cdFx0XHRjYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiYXJyb3dUb3BcIik7XG5cdFx0fVxuXG5cdFx0d3JhcHBlckVsZW1lbnQuc3R5bGUudG9wID0gdG9wICsgXCJweFwiO1xuXHRcdHdyYXBwZXJFbGVtZW50LnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuXHR9O1xuXG5cdHNlbGYudG9nZ2xlID0gZnVuY3Rpb24gKCkge1xuXHRcdGlmIChzZWxmLmlzT3Blbikge1xuXHRcdFx0c2VsZi5jbG9zZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzZWxmLm9wZW4oKTtcblx0XHR9XG5cdH07XG5cblx0c2VsZi5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRzZWxmLmlzT3BlbiA9IGZhbHNlO1xuXHRcdHdyYXBwZXJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIpO1xuXHRcdChzZWxmLmFsdElucHV0IHx8IHNlbGYuaW5wdXQpLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG5cblx0XHRpZiAoc2VsZi5jb25maWcub25DbG9zZSkge1xuXHRcdFx0c2VsZi5jb25maWcub25DbG9zZShzZWxmLnNlbGVjdGVkRGF0ZU9iaiwgc2VsZi5pbnB1dC52YWx1ZSwgc2VsZik7XG5cdFx0fVxuXHR9O1xuXG5cdHNlbGYuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0c2VsZi5pbnB1dC52YWx1ZSA9IFwiXCI7XG5cblx0XHRpZiAoc2VsZi5hbHRJbnB1dCkge1xuXHRcdFx0c2VsZi5hbHRJbnB1dC52YWx1ZSA9IFwiXCI7XG5cdFx0fVxuXG5cdFx0c2VsZi5zZWxlY3RlZERhdGVPYmogPSBudWxsO1xuXG5cdFx0dHJpZ2dlckNoYW5nZSgpO1xuXHRcdHNlbGYuanVtcFRvRGF0ZSgpO1xuXHR9O1xuXG5cdHRyaWdnZXJDaGFuZ2UgPSBmdW5jdGlvbiB0cmlnZ2VyQ2hhbmdlKCkge1xuXHRcdHNlbGYuaW5wdXQuZGlzcGF0Y2hFdmVudChjbGlja0V2dCk7XG5cblx0XHRpZiAoc2VsZi5jb25maWcub25DaGFuZ2UpIHtcblx0XHRcdHNlbGYuY29uZmlnLm9uQ2hhbmdlKHNlbGYuc2VsZWN0ZWREYXRlT2JqLCBzZWxmLmlucHV0LnZhbHVlLCBzZWxmKTtcblx0XHR9XG5cdH07XG5cblx0c2VsZi5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkb2N1bWVudENsaWNrLCBmYWxzZSk7XG5cblx0XHRpZiAoc2VsZi5hbHRJbnB1dCkge1xuXHRcdFx0c2VsZi5hbHRJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYuYWx0SW5wdXQpO1xuXHRcdH1cblxuXHRcdGlmIChzZWxmLmNvbmZpZy5pbmxpbmUpIHtcblx0XHRcdHZhciBwYXJlbnQgPSBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZSxcblx0XHRcdCAgICByZW1vdmVkRWxlbWVudCA9IHBhcmVudC5yZW1vdmVDaGlsZChzZWxmLmVsZW1lbnQpO1xuXG5cdFx0XHRwYXJlbnQucmVtb3ZlQ2hpbGQoY2FsZW5kYXJDb250YWluZXIpO1xuXHRcdFx0cGFyZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHJlbW92ZWRFbGVtZW50LCBwYXJlbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0ucmVtb3ZlQ2hpbGQod3JhcHBlckVsZW1lbnQpO1xuXHRcdH1cblx0fTtcblxuXHRzZWxmLnJlZHJhdyA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhcikge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcblx0XHRidWlsZERheXMoKTtcblx0fTtcblxuXHRzZWxmLmp1bXBUb0RhdGUgPSBmdW5jdGlvbiAoanVtcERhdGUpIHtcblx0XHRqdW1wRGF0ZSA9IHVEYXRlKGp1bXBEYXRlIHx8IHNlbGYuc2VsZWN0ZWREYXRlT2JqIHx8IHNlbGYuY29uZmlnLmRlZmF1bHREYXRlIHx8IHNlbGYuY29uZmlnLm1pbkRhdGUgfHwgbm93KTtcblxuXHRcdHNlbGYuY3VycmVudFllYXIgPSBqdW1wRGF0ZS5nZXRGdWxsWWVhcigpO1xuXHRcdHNlbGYuY3VycmVudE1vbnRoID0ganVtcERhdGUuZ2V0TW9udGgoKTtcblx0XHRzZWxmLnJlZHJhdygpO1xuXHR9O1xuXG5cdHNlbGYuc2V0RGF0ZSA9IGZ1bmN0aW9uIChkYXRlLCB0cmlnZ2VyQ2hhbmdlRXZlbnQpIHtcblx0XHRkYXRlID0gdURhdGUoZGF0ZSk7XG5cblx0XHRpZiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUgJiYgZGF0ZS5nZXRUaW1lKCkpIHtcblx0XHRcdHNlbGYuc2VsZWN0ZWREYXRlT2JqID0gdURhdGUoZGF0ZSk7XG5cdFx0XHRzZWxmLmp1bXBUb0RhdGUoc2VsZi5zZWxlY3RlZERhdGVPYmopO1xuXHRcdFx0dXBkYXRlVmFsdWUoKTtcblxuXHRcdFx0aWYgKHRyaWdnZXJDaGFuZ2VFdmVudCkge1xuXHRcdFx0XHR0cmlnZ2VyQ2hhbmdlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdHNlbGYuc2V0VGltZSA9IGZ1bmN0aW9uIChob3VyLCBtaW51dGUsIHRyaWdnZXJDaGFuZ2VFdmVudCkge1xuXHRcdGlmICghc2VsZi5zZWxlY3RlZERhdGVPYmopIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRzZWxmLmhvdXJFbGVtZW50LnZhbHVlID0gcGFyc2VJbnQoaG91ciwgMTApICUgMjQ7XG5cdFx0c2VsZi5taW51dGVFbGVtZW50LnZhbHVlID0gcGFyc2VJbnQobWludXRlIHx8IDAsIDEwKSAlIDYwO1xuXG5cdFx0aWYgKCFzZWxmLmNvbmZpZy50aW1lXzI0aHIpIHtcblx0XHRcdHNlbGYuYW1QTS5pbm5lckhUTUwgPSBob3VyID4gMTEgPyBcIlBNXCIgOiBcIkFNXCI7XG5cdFx0fVxuXG5cdFx0dXBkYXRlVmFsdWUoKTtcblxuXHRcdGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQpIHtcblx0XHRcdHRyaWdnZXJDaGFuZ2UoKTtcblx0XHR9XG5cdH07XG5cblx0c2VsZi5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHRcdGlmIChrZXkgaW4gc2VsZi5jb25maWcpIHtcblx0XHRcdHNlbGYuY29uZmlnW2tleV0gPSB2YWx1ZTtcblx0XHRcdHNlbGYuanVtcFRvRGF0ZSgpO1xuXHRcdH1cblx0fTtcblxuXHRhbVBNVG9nZ2xlID0gZnVuY3Rpb24gYW1QTVRvZ2dsZShlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IFtcIkFNXCIsIFwiUE1cIl1bc2VsZi5hbVBNLmlubmVySFRNTCA9PT0gXCJBTVwiIHwgMF07XG5cdH07XG5cblx0b25LZXlEb3duID0gZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcblx0XHRpZiAoIXNlbGYuaXNPcGVuIHx8IHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgJiYgdGltZUNvbnRhaW5lci5jb250YWlucyhlLnRhcmdldCkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRzd2l0Y2ggKGUud2hpY2gpIHtcblx0XHRcdGNhc2UgMTM6XG5cdFx0XHRcdHNlbGVjdERhdGUoZSk7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIDI3OlxuXHRcdFx0XHRzZWxmLmNsb3NlKCk7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIDM3OlxuXHRcdFx0XHRjaGFuZ2VNb250aCgtMSk7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIDM4OlxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdHNlbGYuY3VycmVudFllYXIrKztcblx0XHRcdFx0c2VsZi5yZWRyYXcoKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgMzk6XG5cdFx0XHRcdGNoYW5nZU1vbnRoKDEpO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSA0MDpcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRzZWxmLmN1cnJlbnRZZWFyLS07XG5cdFx0XHRcdHNlbGYucmVkcmF3KCk7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdH07XG5cblx0b25SZXNpemUgPSBkZWJvdW5jZShmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5pbmxpbmUgJiYgIXNlbGYuY29uZmlnLnN0YXRpYykge1xuXHRcdFx0c2VsZi5wb3NpdGlvbkNhbGVuZGFyKCk7XG5cdFx0fVxuXHR9LCAzMDApO1xuXG5cdHRyeSB7XG5cdFx0aW5pdCgpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIHNraXAgYW5kIGNhcnJ5IG9uXG5cdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0Y29uc29sZS5pbmZvKHNlbGYuZWxlbWVudCk7XG5cdH1cblxuXHRyZXR1cm4gc2VsZjtcbn07XG5cbmZsYXRwaWNrci5pbml0LnByb3RvdHlwZSA9IHtcblxuXHRkZWZhdWx0Q29uZmlnOiB7fSxcblxuXHRsMTBuOiB7XG5cdFx0d2Vla2RheXM6IHtcblx0XHRcdHNob3J0aGFuZDogW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdLFxuXHRcdFx0bG9uZ2hhbmQ6IFtcIlN1bmRheVwiLCBcIk1vbmRheVwiLCBcIlR1ZXNkYXlcIiwgXCJXZWRuZXNkYXlcIiwgXCJUaHVyc2RheVwiLCBcIkZyaWRheVwiLCBcIlNhdHVyZGF5XCJdXG5cdFx0fSxcblx0XHRtb250aHM6IHtcblx0XHRcdHNob3J0aGFuZDogW1wiSmFuXCIsIFwiRmViXCIsIFwiTWFyXCIsIFwiQXByXCIsIFwiTWF5XCIsIFwiSnVuXCIsIFwiSnVsXCIsIFwiQXVnXCIsIFwiU2VwXCIsIFwiT2N0XCIsIFwiTm92XCIsIFwiRGVjXCJdLFxuXHRcdFx0bG9uZ2hhbmQ6IFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiLCBcIkF1Z3VzdFwiLCBcIlNlcHRlbWJlclwiLCBcIk9jdG9iZXJcIiwgXCJOb3ZlbWJlclwiLCBcIkRlY2VtYmVyXCJdXG5cdFx0fSxcblx0XHRkYXlzSW5Nb250aDogWzMxLCAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdLFxuXHRcdGZpcnN0RGF5T2ZXZWVrOiAwLFxuXHRcdG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnRoKSB7XG5cdFx0XHR2YXIgcyA9IG50aCAlIDEwMDtcblx0XHRcdGlmIChzID4gMyAmJiBzIDwgMjEpIHJldHVybiBcInRoXCI7XG5cdFx0XHRzd2l0Y2ggKHMgJSAxMCkge1xuXHRcdFx0XHRjYXNlIDE6XG5cdFx0XHRcdFx0cmV0dXJuIFwic3RcIjtcblx0XHRcdFx0Y2FzZSAyOlxuXHRcdFx0XHRcdHJldHVybiBcIm5kXCI7XG5cdFx0XHRcdGNhc2UgMzpcblx0XHRcdFx0XHRyZXR1cm4gXCJyZFwiO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHJldHVybiBcInRoXCI7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHR3ZWVrQWJicmV2aWF0aW9uOiBcIldrXCIsXG5cdFx0c2Nyb2xsVGl0bGU6IFwiU2Nyb2xsIHRvIGluY3JlbWVudFwiLFxuXHRcdHRvZ2dsZVRpdGxlOiBcIkNsaWNrIHRvIHRvZ2dsZVwiXG5cdH1cblxufTtcblxuRGF0ZS5wcm90b3R5cGUuZnBfaW5jciA9IGZ1bmN0aW9uIChkYXlzKSB7XG5cdHJldHVybiBuZXcgRGF0ZSh0aGlzLmdldEZ1bGxZZWFyKCksIHRoaXMuZ2V0TW9udGgoKSwgdGhpcy5nZXREYXRlKCkgKyBwYXJzZUludChkYXlzLCAxMCkpO1xufTtcblxuRGF0ZS5wcm90b3R5cGUuZnBfaXNVVEMgPSBmYWxzZTtcbkRhdGUucHJvdG90eXBlLmZwX3RvVVRDID0gZnVuY3Rpb24gKCkge1xuXHR2YXIgbmV3RGF0ZSA9IG5ldyBEYXRlKHRoaXMuZ2V0VGltZSgpICsgdGhpcy5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDApO1xuXHRuZXdEYXRlLmZwX2lzVVRDID0gdHJ1ZTtcblxuXHRyZXR1cm4gbmV3RGF0ZTtcbn07XG5cbkRhdGUucHJvdG90eXBlLmZwX2dldFdlZWsgPSBmdW5jdGlvbiAoKSB7XG5cdHZhciBkYXRlID0gbmV3IERhdGUodGhpcy5nZXRUaW1lKCkpO1xuXHRkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuXG5cdC8vIFRodXJzZGF5IGluIGN1cnJlbnQgd2VlayBkZWNpZGVzIHRoZSB5ZWFyLlxuXHRkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAzIC0gKGRhdGUuZ2V0RGF5KCkgKyA2KSAlIDcpO1xuXHQvLyBKYW51YXJ5IDQgaXMgYWx3YXlzIGluIHdlZWsgMS5cblx0dmFyIHdlZWsxID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCA0KTtcblx0Ly8gQWRqdXN0IHRvIFRodXJzZGF5IGluIHdlZWsgMSBhbmQgY291bnQgbnVtYmVyIG9mIHdlZWtzIGZyb20gZGF0ZSB0byB3ZWVrMS5cblx0cmV0dXJuIDEgKyBNYXRoLnJvdW5kKCgoZGF0ZS5nZXRUaW1lKCkgLSB3ZWVrMS5nZXRUaW1lKCkpIC8gODY0MDAwMDAgLSAzICsgKHdlZWsxLmdldERheSgpICsgNikgJSA3KSAvIDcpO1xufTtcblxuLy8gY2xhc3NMaXN0IHBvbHlmaWxsXG5pZiAoIShcImNsYXNzTGlzdFwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIHR5cGVvZiBIVE1MRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoSFRNTEVsZW1lbnQucHJvdG90eXBlLCBcImNsYXNzTGlzdFwiLCB7XG5cdFx0Z2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdFx0XHR2YXIgc2VsZkVsZW1lbnRzID0gdGhpcztcblx0XHRcdGZ1bmN0aW9uIHVwZGF0ZShmbikge1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0XHRcdFx0dmFyIGNsYXNzZXMgPSBzZWxmRWxlbWVudHMuY2xhc3NOYW1lLnNwbGl0KC9cXHMrLyk7XG5cdFx0XHRcdFx0dmFyIGluZGV4ID0gY2xhc3Nlcy5pbmRleE9mKHZhbHVlKTtcblxuXHRcdFx0XHRcdGZuKGNsYXNzZXMsIGluZGV4LCB2YWx1ZSk7XG5cdFx0XHRcdFx0c2VsZkVsZW1lbnRzLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbihcIiBcIik7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cblx0XHRcdHZhciByZXQgPSB7XG5cdFx0XHRcdGFkZDogdXBkYXRlKGZ1bmN0aW9uIChjbGFzc2VzLCBpbmRleCwgdmFsdWUpIHtcblx0XHRcdFx0XHRyZXR1cm4gfmluZGV4IHx8IGNsYXNzZXMucHVzaCh2YWx1ZSk7XG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRyZW1vdmU6IHVwZGF0ZShmdW5jdGlvbiAoY2xhc3NlcywgaW5kZXgpIHtcblx0XHRcdFx0XHRyZXR1cm4gfmluZGV4ICYmIGNsYXNzZXMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0fSksXG5cdFx0XHRcdHRvZ2dsZTogdXBkYXRlKGZ1bmN0aW9uIChjbGFzc2VzLCBpbmRleCwgdmFsdWUpIHtcblx0XHRcdFx0XHRpZiAofmluZGV4KSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaCh2YWx1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSxcblx0XHRcdFx0Y29udGFpbnM6IGZ1bmN0aW9uIGNvbnRhaW5zKHZhbHVlKSB7XG5cdFx0XHRcdFx0cmV0dXJuICEhIH5zZWxmRWxlbWVudHMuY2xhc3NOYW1lLnNwbGl0KC9cXHMrLykuaW5kZXhPZih2YWx1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXHR9KTtcbn1cblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0bW9kdWxlLmV4cG9ydHMgPSBmbGF0cGlja3I7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG5vZGVfbW9kdWxlcy9mbGF0cGlja3IvZGlzdC9mbGF0cGlja3IuanMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 1 */
/***/ function(module, exports) {

"use strict";
eval("\"use strict\";\nvar Plugins = (function () {\n    function Plugins() {\n        this.exposes = {};\n    }\n    Plugins.prototype.install = function () {\n    };\n    return Plugins;\n}());\nexports.Plugins = Plugins;\n//# sourceMappingURL=Plugins.js.map//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL3R5cGVzY3JpcHQvUGx1Z2lucy9QbHVnaW5zLmpzPzNiMjUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgUGx1Z2lucyA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUGx1Z2lucygpIHtcbiAgICAgICAgdGhpcy5leHBvc2VzID0ge307XG4gICAgfVxuICAgIFBsdWdpbnMucHJvdG90eXBlLmluc3RhbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgfTtcbiAgICByZXR1cm4gUGx1Z2lucztcbn0oKSk7XG5leHBvcnRzLlBsdWdpbnMgPSBQbHVnaW5zO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGx1Z2lucy5qcy5tYXBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gcmVzb3VyY2VzL2Fzc2V0cy90eXBlc2NyaXB0L1BsdWdpbnMvUGx1Z2lucy5qcyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

"use strict";
eval("\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Plugins_1 = __webpack_require__(1);\nwindow['dreamsark'].exposes({\n    DateTimePicker: __webpack_require__(0)\n});\nvar DateTime = (function (_super) {\n    __extends(DateTime, _super);\n    function DateTime(app, element, options) {\n        if (options === void 0) { options = []; }\n        _super.call(this);\n        this.localize();\n        new DateTimePicker(element, {\n            allowInput: true,\n            enableTime: true,\n            minuteIncrement: 1,\n            defaultDate: new Date()\n        });\n    }\n    DateTime.prototype.localize = function () {\n        DateTimePicker.init.prototype.l10n.weekdays = {\n            shorthand: ['周日', '周一', '周二', '周三', '周四', '周五', '周六'],\n            longhand: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六']\n        };\n        DateTimePicker.init.prototype.l10n.months = {\n            shorthand: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\n            longhand: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月']\n        };\n    };\n    return DateTime;\n}(Plugins_1.Plugins));\nexports.DateTime = DateTime;\n/**\n * Auto install itself\n */\nwindow['dreamsark'].install({\n    DateTime: DateTime\n});\n//# sourceMappingURL=DateTime.js.map//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL3R5cGVzY3JpcHQvUGx1Z2lucy9EYXRlVGltZS5qcz9iNDE3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgUGx1Z2luc18xID0gcmVxdWlyZShcIi4vUGx1Z2luc1wiKTtcbndpbmRvd1snZHJlYW1zYXJrJ10uZXhwb3Nlcyh7XG4gICAgRGF0ZVRpbWVQaWNrZXI6IHJlcXVpcmUoXCJmbGF0cGlja3JcIilcbn0pO1xudmFyIERhdGVUaW1lID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGF0ZVRpbWUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGF0ZVRpbWUoYXBwLCBlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IFtdOyB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmxvY2FsaXplKCk7XG4gICAgICAgIG5ldyBEYXRlVGltZVBpY2tlcihlbGVtZW50LCB7XG4gICAgICAgICAgICBhbGxvd0lucHV0OiB0cnVlLFxuICAgICAgICAgICAgZW5hYmxlVGltZTogdHJ1ZSxcbiAgICAgICAgICAgIG1pbnV0ZUluY3JlbWVudDogMSxcbiAgICAgICAgICAgIGRlZmF1bHREYXRlOiBuZXcgRGF0ZSgpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBEYXRlVGltZS5wcm90b3R5cGUubG9jYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIERhdGVUaW1lUGlja2VyLmluaXQucHJvdG90eXBlLmwxMG4ud2Vla2RheXMgPSB7XG4gICAgICAgICAgICBzaG9ydGhhbmQ6IFsn5ZGo5pelJywgJ+WRqOS4gCcsICflkajkuownLCAn5ZGo5LiJJywgJ+WRqOWbmycsICflkajkupQnLCAn5ZGo5YWtJ10sXG4gICAgICAgICAgICBsb25naGFuZDogWyfmmJ/mnJ/ml6UnLCAn5pif5pyf5LiAJywgJ+aYn+acn+S6jCcsICfmmJ/mnJ/kuIknLCAn5pif5pyf5ZubJywgJ+aYn+acn+S6lCcsICfmmJ/mnJ/lha0nXVxuICAgICAgICB9O1xuICAgICAgICBEYXRlVGltZVBpY2tlci5pbml0LnByb3RvdHlwZS5sMTBuLm1vbnRocyA9IHtcbiAgICAgICAgICAgIHNob3J0aGFuZDogWyfkuIDmnIgnLCAn5LqM5pyIJywgJ+S4ieaciCcsICflm5vmnIgnLCAn5LqU5pyIJywgJ+WFreaciCcsICfkuIPmnIgnLCAn5YWr5pyIJywgJ+S5neaciCcsICfljYHmnIgnLCAn5Y2B5LiA5pyIJywgJ+WNgeS6jOaciCddLFxuICAgICAgICAgICAgbG9uZ2hhbmQ6IFsn5LiA5pyIJywgJ+S6jOaciCcsICfkuInmnIgnLCAn5Zub5pyIJywgJ+S6lOaciCcsICflha3mnIgnLCAn5LiD5pyIJywgJ+WFq+aciCcsICfkuZ3mnIgnLCAn5Y2B5pyIJywgJ+WNgeS4gOaciCcsICfljYHkuozmnIgnXVxuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIERhdGVUaW1lO1xufShQbHVnaW5zXzEuUGx1Z2lucykpO1xuZXhwb3J0cy5EYXRlVGltZSA9IERhdGVUaW1lO1xuLyoqXG4gKiBBdXRvIGluc3RhbGwgaXRzZWxmXG4gKi9cbndpbmRvd1snZHJlYW1zYXJrJ10uaW5zdGFsbCh7XG4gICAgRGF0ZVRpbWU6IERhdGVUaW1lXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURhdGVUaW1lLmpzLm1hcFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyByZXNvdXJjZXMvYXNzZXRzL3R5cGVzY3JpcHQvUGx1Z2lucy9EYXRlVGltZS5qcyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }
/******/ ]);